mse version: 2.0.0
game: magic
short name: showcase集合
full name: showcase mix
icon: card-sample.png
installer group: magic/m15 style/normal cards
position hint: 001

version: 2021-02-16
depends on:
	package: magic.mse-game
	version: 2014-06-25
depends on:
	package: magic-default-image.mse-include
	version: 2007-09-23
depends on:
	package: magic-watermarks.mse-include
	version: 2007-09-23
depends on:
	package: magic-identity-new.mse-include
	version: 2012-01-22
depends on:
	package: magic-mana-large.mse-symbol-font
	version: 2007-09-23
depends on:
	package: magic-mana-small.mse-symbol-font
	version: 2007-09-23
depends on:
	package: magic-mainframe-extras.mse-include
	version: 2007-09-23
depends on: 
	package: magic-rarity.mse-include
	version: 2013-08-21
depends on: 
	package: magic-all-style.mse-include
	version: 2024-06-30

card width: 750
card height: 1050
card dpi: 600

####### images from digiman
############################################################## Extra scripts
init script:
	special_card_hybrid_2 := { 
		if styling.frames=="scroll" then
			masked_blend(mask: "scroll/scroll_blend.png", light: template(colors.0), dark: template(colors.1))
		else if styling.frames=="sketch" then
			masked_blend(mask: "sketch/sketch_blend.png", light: template(colors.0), dark: template(colors.1))
		else if styling.frames=="draconic" then
			masked_blend(mask: "draconic/draconic_blend.png", light: template(colors.0), dark: template(colors.1))
		else
			linear_blend( image1: template( colors[0] ), image2: template( colors[1] ), x1: 0.4,	y1: 0 x2: 0.6, y2: 0 )
	}
	special_horizontal_card_hybrid :=
	[
		0:	horizontal_card_hybrid[0]
		1:	horizontal_card_hybrid[1]
		2:	special_card_hybrid_2
		3:	horizontal_card_hybrid[3]
		4:	horizontal_card_hybrid[4]
		5:	horizontal_card_hybrid[5]
		6:	horizontal_card_hybrid[6]
		7:	horizontal_card_hybrid[7]
	]
	special_card_hybrid :=
	[
		radial:		card_hybrid["radial"]
		horizontal:	special_horizontal_card_hybrid
		overlay:	card_hybrid["overlay"]
		vertical:	card_hybrid["vertical"]
	]

	sketch_crown_card_hybrid_2 := { 
		masked_blend(mask: "sketch/crown/sketch_blend.png", light: template(colors.0), dark: template(colors.1))
	}
	sketch_crown_horizontal_card_hybrid :=
	[
		0:	horizontal_card_hybrid[0]
		1:	horizontal_card_hybrid[1]
		2:	sketch_crown_card_hybrid_2
		3:	horizontal_card_hybrid[3]
		4:	horizontal_card_hybrid[4]
		5:	horizontal_card_hybrid[5]
		6:	horizontal_card_hybrid[6]
		7:	horizontal_card_hybrid[7]
	]
	sketch_crown_hybrid :=
	[
		radial:		card_hybrid["radial"]
		horizontal:	sketch_crown_horizontal_card_hybrid
		overlay:	card_hybrid["overlay"]
		vertical:	card_hybrid["vertical"]
	]

	sketch_pt_card_hybrid_2 := {
		"sketch/pt/mpt.png"
	}
	sketch_pt_horizontal_card_hybrid :=
	[
		0:	horizontal_card_hybrid[0]
		1:	horizontal_card_hybrid[1]
		2:	sketch_pt_card_hybrid_2
		3:	horizontal_card_hybrid[3]
		4:	horizontal_card_hybrid[4]
		5:	horizontal_card_hybrid[5]
		6:	horizontal_card_hybrid[6]
		7:	horizontal_card_hybrid[7]
	]
	sketch_pt_hybrid :=
	[
		radial:		card_hybrid["radial"]
		horizontal:	sketch_pt_horizontal_card_hybrid
		overlay:	card_hybrid["overlay"]
		vertical:	card_hybrid["vertical"]
	]











	# Load scripts for image box
	include file: /magic-default-image.mse-include/scripts
	include file: /magic-all-style.mse-include/script

	# Should hybrids have a grey name?
	mask_hybrid_with_land := { styling.grey_hybrid_name }
	
	#Should multicolor lands with basic land types have a colored name?
	mask_multi_land_with_color := { styling.colored_multicolor_land_name }
	
	template_prefix_normal := [
	exp:"expedition/exp/" znr:"expedition/znr/" 
	neon:"neon/" neon2:"neon/back/" 
	ninja:"ninja/" samurai:"samurai/"

	phyrexiancrown:"phyrexian/crown/"

	equinox:"equinox/" equinoxpt:"equinox/pt/"

	magicfest:"magicfest/" magicfestcrown:"magicfest/crown/" magicfeststamp:"magicfest/stamp/"
	
	etched: "etched/" etchedcrown:"etched/crown/" etchedpt:"etched/pt/" etchedstamp:"etched/stamp/"

	artdecocrown:"artdeco/crown/" artdecopt:"artdeco/pt/"

	fang:"fang/" fangcrown:"fang/crown/" fangpt:"fang/pt/"

	ixalan:"ixalan/" ixalancrown:"ixalan/crown/" ixalanpt:"ixalan/pt/"

	tarkir:"tarkir/" tarkircrown:"tarkir/crown/" tarkirpt:"tarkir/pt/"

	crystalcrown:"crystal/crown/" crystalpt:"crystal/pt/"

	invocation:"invocation/"

	glass:"glass/" glasscrown:"glass/crown/" glasspt:"glass/pt/"

	scroll:"scroll/" scrollcrown:"scroll/crown/" scrollpt:"scroll/pt/"
	ring:"ring/" ringcrown:"ring/crown/" ringpt:"ring/pt/"

	tardis:"tardis/" tardiscrown:"tardis/crown/"

	ravnica:"ravnica/" ravnicacrown:"ravnica/crown/" ravnicapt:"ravnica/pt/" ravnicatwins:"ravnica/twins/"
	archive:"archive/" archivecrown:"archive/crown/" archivept:"archive/pt/" archivetwins:"archive/twins/"

	sketch:"sketch/" sketchcrown:"sketch/crown/" sketchpt:"sketch/pt/"
	
	storybook:"storybook/" storybookcrown:"storybook/crown/" storybookpt:"storybook/pt/"
	storyadv:"storybook/adventure/" storyadvlp:"storybook/adventure/lp/"
	talept:"tale/pt/"

	dossier:"dossier/" dossiercrown:"dossier/crown/"
	magnified:"magnified/"

	pipboy:"pipboy/" pipboycrown:"pipboy/crown/"
	
	vault:"vault/" vaultcrown:"vault/crown/" vaultpt:"vault/pt/" vaultstamp:"vault/stamp/"

	breakingnews:"breakingnews/" breakingnewscrown:"breakingnews/crown/" breakingnewspt:"breakingnews/pt/"

	memory:"memory/" memorypt:"memory/pt/"
	
	lcilegend:"lcilegend/"

	paranormal:"paranormal/"
	paranormalstamp:"paranormal/stamp/"

	jpshowcase:"jpshowcase/"
	jpshowcasept:"jpshowcase/pt/"
	jpshowcasestamp:"jpshowcase/stamp/"

	draconic:"draconic/" draconicpt:"draconic/pt/" draconicstamp:"draconic/stamp/"

	stellar:"stellarsights/" stellarpt:"stellarsights/pt/"
	stellarpost:"stellarsights/poster/"

	unstable:"unstable/"
	unfinityland:"unfinityland/"
	zdktll:"tll/zdk/" instll:"tll/ins/" thstll:"tll/ths/"
	colorback:"sourcebook/back/"
	identity: "/magic-identity-new.mse-include/"
	]
	
	template_suffix := [
	inv: "card.png"
	exp:"card.png" znr:"card.png" 
	neon: "card.png" neon2:"card.png" 
	ninja:"card.png" samurai:"card.png" 

	phyrexian:"card.png" phyrexiancrown:"crown.png"

	equinox:"card.png" equinoxpt:"pt.png"

	magicfest:"card.png" magicfestcrown:"crown.png" magicfeststamp:"stamp.png"
	
	etched:"card.png" etchedcrown:"crown.png" etchedpt:"pt.png" etchedstamp:"stamp.png"

	artdeco:"card.png" artdecocrown:"crown.png" artdecopt:"pt.png"

	skyscraper:"card.png"

	fang:"card.png" fangcrown:"crown.png" fangpt:"pt.png"

	ixalan:"card.png" ixalancrown:"crown.png" ixalanpt:"pt.png"

	tarkir:"card.png" tarkircrown:"crown.png" tarkirpt:"pt.png"

	crystal:"card.png" crystalcrown:"crown.png" crystalpt:"pt.png"

	invocation:"card.png"

	glass:"card.png" glasscrown:"crown.png" glasspt:"pt.png"

	scroll:"card.png" scrollcrown:"crown.png" scrollpt:"pt.png"
	ring:"card.png" ringcrown:"crown.png" ringpt:"pt.png"

	tardis:"card.png" tardiscrown:"crown.png"

	ravnica:"card.png" ravnicacrown:"crown.png" ravnicapt:"pt.png" ravnicatwins:"card.png"
	archive:"card.png" archivecrown:"crown.png" archivept:"pt.png" archivetwins:"card.png"
	tale:"card.png" talept:"pt.png"

	sketch:"card.png" sketchcrown:"crown.png" sketchpt:"pt.png"

	storybook:"card.png" storybookcrown:"crown.png" storybookpt:"pt.png"
	storyadv:"card.png" storyadvlp:"lp.png"

	dossier:"card.png" dossiercrown:"crown.png"
	magnified:".png"

	pipboy:"card.png" pipboycrown:"crown.png"

	vault:"card.png" vaultcrown:"crown.png" vaultpt:"pt.png" vaultstamp:"stamp.png"

	breakingnews:"card.png" breakingnewscrown:"crown.png" breakingnewspt:"pt.png"

	memory:".png" memorypt:".png"
	
	lcilegend:"card.png"

	paranormal:".png"
	paranormalstamp:".png"

	jpshowcase:".png"
	jpshowcasept:"pt.png"
	jpshowcasestamp:".png"

	draconic:".png" draconicpt:".png" draconicstamp:".png"

	stellar:".png" stellarpt:".png"
	stellarpost:".png"

	unstable:"card.png"
	unfinityland:"card.png"
	zdktll:"card.png" instll:"card.png" thstll:"card.png" onetll:"card.png"
	colorback:".jpg"
	crown:"crown.png" pt: "pt.png" identity: "identity.png"

	crownall:"crown.png" ptall: "pt.png"
	]
	
	template_prefix_inv := [inv: "invention/back/"]
	template_prefix_inv_rare := [inv: "invention/"]

	template_prefix_phyrexian := [phyrexian: "phyrexian/back/"]
	template_prefix_phyrexian_rare := [phyrexian: "phyrexian/"]

	template_prefix_crystal := [crystal: "crystal/back/"]
	template_prefix_crystal_rare := [crystal: "crystal/"]

	template_prefix_tale := [tale:"tale/back/"]
	template_prefix_tale_rare := [tale:"tale/"]

	template_prefix_artdeco := [artdeco: "artdeco/back/"]
	template_prefix_artdeco_rare := [artdeco: "artdeco/"]

	template_prefix_skyscraper := [skyscraper: "skyscraper/back/"]
	template_prefix_skyscraper_rare := [skyscraper: "skyscraper/"]

	template_prefix_unstable := [unstable: "unstable/back/"]
	template_prefix_unstable_rare := [unstable: "unstable/"]

	template_prefix_pt := [pt: "pt/"]
	template_prefix_pt_neon := [pt: "neon/pt/"]
	template_prefix_pt_ninja := [pt: "ninja/pt/"]
	template_prefix_pt_samurai := [pt: "samurai/pt/"]
	template_prefix_pt_phyrexian := [pt: "phyrexian/pt/"]
	
	template_prefix_crown := [crown:""]
	template_prefix_crown_neon := [crown:"neon/crown/"]
	template_prefix_crown_ninja := [crown:"ninja/crown/"]
	template_prefix_crown_samurai := [crown:"samurai/crown/"]

	template_prefix_onetll_ub := [onetll: "tll/one/ub/"]
	template_prefix_onetll := [onetll: "tll/one/"]
	
	template_prefix := {
		if type == "inv" then
			if (is_rare() and styling.use_holofoil_stamps) then template_prefix_inv_rare else template_prefix_inv
		else if type == "phyrexian" then
			if (is_rare() and styling.use_holofoil_stamps) then template_prefix_phyrexian_rare else template_prefix_phyrexian
		else if type == "crystal" then
			if (is_rare() and styling.use_holofoil_stamps) then template_prefix_crystal_rare else template_prefix_crystal
		else if type == "artdeco" then
			if (is_rare() and styling.use_holofoil_stamps) then template_prefix_artdeco_rare else template_prefix_artdeco
		else if type == "skyscraper" then
			if (is_rare() and styling.use_holofoil_stamps) then template_prefix_skyscraper_rare else template_prefix_skyscraper
		else if type == "unstable" then
			if (is_rare() and styling.use_holofoil_stamps) then template_prefix_unstable_rare else template_prefix_unstable
		else if type == "tale" then
			if (is_rare() and styling.use_holofoil_stamps) then template_prefix_tale_rare else template_prefix_tale
		else if type == "onetll" then
			if (is_ub()) then template_prefix_onetll_ub else template_prefix_onetll
		else if type == "pt" then
			if styling.frames=="neon" then template_prefix_pt_neon
			else if styling.frames=="ninja" then template_prefix_pt_ninja
			else if styling.frames=="samurai" then template_prefix_pt_samurai
			else if styling.frames=="phyrexian" then template_prefix_pt_phyrexian
			else template_prefix_pt 
		else if type == "crown" then
			if styling.frames=="neon" then template_prefix_crown_neon
			else if styling.frames=="ninja" then template_prefix_crown_ninja
			else if styling.frames=="samurai" then template_prefix_crown_samurai
			else template_prefix_crown
		else if type == "ptall" then
			if styling.frames=="lcilegend" then [ptall: "lcilegend/pt/"]
			else if styling.frames=="paranormal" then [ptall: "paranormal/pt/"]
			else [ptall: ""]
		else if type == "crownall" then
			if styling.frames=="lcilegend" then [crownall: "lcilegend/crown/"]
			else if styling.frames=="paranormal" then [crownall: "paranormal/crown/"]
			else [crownall: ""]
		else
			template_prefix_normal 
		}
	  
	template      := { template_prefix()[type] + input + template_suffix[type] }
	land_template := { template_prefix()[type] + (if input == "a" then "c" else input) + (if hasland(type) then "l" else "") + template_suffix[type] }
	
	hasland := {if input == "magicfest" then true else false }
	
	# Use land templates for previews because they show more contrast
	hybrid_previews := "land,hybrid"
	crown_background := { color_background(type:"crown",     base_hybrid:card_hybrid) }

	# Use the normal tap symbol
	mana_t := {
		if      styling.tap_symbol == "old"        then "old"
		else if styling.tap_symbol == "diagonal T" then "older"
		else                                            "new"
	}
	
	# Use guild mana symbols?
	guild_mana := { styling.use_guild_mana_symbols }
	
	# Is the card a promo card?
	is_promo := { styling.promo }
	is_ub := {chosen(styling.others, choice:"universe beyond(For some frames)")}
	is_legend := {set.auto_legends and ( contains(card.super_type, match:"Legendary") or contains(card.super_type, match:"LEGENDARY") or contains(card.super_type, match:"传奇") or contains(card.type, match:"Mewk")) }
	is_vehicle := {contains(card.type, match:"Vehicle") or contains(card.type, match:"载具")}
	is_tll := {styling.frames=="textless land(zendikar)" or styling.frames=="textless land(innistrad)"}
	
	mana_sort := {
		if styling.unsorted_casting_cost then
			input
		else
			sort_text@(order: "XYZI[0123456789]HSCA(WUBRG)")()
	}
	ancestral_mana := { styling.ancestral_mana_symbols }
	has_identity := { styling.color_indicator_dot }
	is_unsorted := {styling.remove_from_autocount}
	has_shadow := { chosen(styling.others, choice:"use shadow") }

	shrink_adventure_name := {if styling.shrink_adventure_name_text != "" then to_number(styling.shrink_adventure_name_text) else 0}
	
	invention_background := { color_background(type:"inv",     base_hybrid:card_hybrid) }
	
	goldenage_background := { "goldenage/" + (if (is_rare() and styling.use_holofoil_stamps) then "r_" else "") + (if is_legend() then "legend_" else "") + "frame.png" }
	
	znr_background := { color_background(type:"znr",     base_hybrid:card_hybrid) }
	exp_background := { color_background(type:"exp",     base_hybrid:card_hybrid) }
	
	neon_background := { color_background(type:"neon",     base_hybrid:card_hybrid) }
	neon_background2 := { color_background(type:"neon2",     base_hybrid:card_hybrid) }
	
	ninja_background := { color_background(type:"ninja",     base_hybrid:card_hybrid) }
	samurai_background := { color_background(type:"samurai",     base_hybrid:card_hybrid) }
	
	dndsb_background := { "sourcebook/" + (if (is_rare() and styling.use_holofoil_stamps) then "r_" else "") + "frame.png" }
	color_back_background := { color_background(type:"colorback",     base_hybrid:card_hybrid) }
	
	phyrexian_background := { color_background(type:"phyrexian",     base_hybrid:card_hybrid) }
	phyrexian_crown_background := { color_background(type:"phyrexiancrown",     base_hybrid:card_hybrid) }

	etched_background := { color_background(type:"etched",     base_hybrid:card_hybrid) }
	etched_crown_background := { color_background(type:"etchedcrown",     base_hybrid:card_hybrid) }
	etched_pt_background := { color_background(type:"etchedpt",     base_hybrid:card_hybrid) }
	etched_stamp_background := { color_background(type:"etchedstamp",     base_hybrid:stamp_hybrid) }
	
	
	equinox_background := { color_background(type:"equinox",     base_hybrid:card_hybrid) }
	equinox_pt_background := { color_background(type:"equinoxpt",     base_hybrid:card_hybrid) }

	magicfest_background := { color_background(type:"magicfest",     base_hybrid:card_hybrid) }
	magicfest_crown_background := { color_background(type:"magicfestcrown",     base_hybrid:card_hybrid) }
	magicfeststamp_background := { color_background(type:"magicfeststamp",     base_hybrid:stamp_hybrid) }

	artdeco_background := { color_background(type:"artdeco",     base_hybrid:card_hybrid) }
	artdeco_crown_background := { color_background(type:"artdecocrown",     base_hybrid:card_hybrid) }
	artdeco_pt_background := { color_background(type:"artdecopt",     base_hybrid:card_hybrid) }

	fang_background := { color_background(type:"fang",     base_hybrid:card_hybrid) }
	fang_crown_background := { color_background(type:"fangcrown",     base_hybrid:card_hybrid) }
	fang_pt_background := { color_background(type:"fangpt",     base_hybrid:card_hybrid) }

	ravnica_background := { color_background(type:"ravnica",     base_hybrid:ravnica_hybrid) }
	ravnica_crown_background := { color_background(type:"ravnicacrown",     base_hybrid:ravnica_hybrid) }
	ravnica_pt_background := { color_background(type:"ravnicapt",     base_hybrid:card_hybrid) }
	ravnica_twins_background := { color_background(type:"ravnicatwins",     base_hybrid:card_hybrid) }

	archive_background := { color_background(type:"archive",     base_hybrid:ravnica_hybrid) }
	archive_crown_background := { color_background(type:"archivecrown",     base_hybrid:ravnica_hybrid) }
	archive_pt_background := { color_background(type:"archivept",     base_hybrid:card_hybrid) }
	archive_twins_background := { color_background(type:"archivetwins",     base_hybrid:archive_hybrid) }

	sketch_background := { color_background(type:"sketch",     base_hybrid:special_card_hybrid) }
	sketch_crown_background := { color_background(type:"sketchcrown",     base_hybrid:sketch_crown_hybrid) }
	sketch_pt_background := { color_background(type:"sketchpt",     base_hybrid:sketch_pt_hybrid) }

	ixalan_background := { color_background(type:"ixalan",     base_hybrid:card_hybrid) }
	ixalan_crown_background := { color_background(type:"ixalancrown",     base_hybrid:card_hybrid) }
	ixalan_pt_background := { color_background(type:"ixalanpt",     base_hybrid:card_hybrid) }

	tarkir_background := { color_background(type:"tarkir",     base_hybrid:card_hybrid) }
	tarkir_crown_background := { color_background(type:"tarkircrown",     base_hybrid:card_hybrid) }
	tarkir_pt_background := { color_background(type:"tarkirpt",     base_hybrid:card_hybrid) }

	crystal_background := { color_background(type:"crystal",     base_hybrid:card_hybrid) }
	crystal_crown_background := { color_background(type:"crystalcrown",     base_hybrid:card_hybrid) }
	crystal_pt_background := { color_background(type:"crystalpt",     base_hybrid:card_hybrid) }

	invocation_background := { color_background(type:"invocation",     base_hybrid:card_hybrid) }

	glass_background := { color_background(type:"glass",     base_hybrid:card_hybrid) }
	glass_crown_background := { color_background(type:"glasscrown",     base_hybrid:card_hybrid) }
	glass_pt_background := { color_background(type:"glasspt",     base_hybrid:card_hybrid) }

	ring_background := { color_background(type:"ring",     base_hybrid:card_hybrid) }
	ring_crown_background := { color_background(type:"ringcrown",     base_hybrid:card_hybrid) }
	ring_pt_background := { color_background(type:"ringpt",     base_hybrid:card_hybrid) }

	scroll_background := { color_background(type:"scroll",     base_hybrid:special_card_hybrid) }
	scroll_crown_background := { color_background(type:"scrollcrown",     base_hybrid:card_hybrid) }
	scroll_pt_background := { color_background(type:"scrollpt",     base_hybrid:card_hybrid) }

	tardis_background := { color_background(type:"tardis",     base_hybrid:card_hybrid) }
	tardis_crown_background := { color_background(type:"tardiscrown",     base_hybrid:card_hybrid) }

	skyscraper_background := { color_background(type:"skyscraper",     base_hybrid:card_hybrid) }

	storybook_background := { color_background(type:"storybook",     base_hybrid:ravnica_hybrid) }
	storybook_crown_background := { color_background(type:"storybookcrown",     base_hybrid:card_hybrid) }
	storybook_pt_background := { color_background(type:"storybookpt",     base_hybrid:card_hybrid) }

	storyadv_background := { color_background(type:"storyadv",     base_hybrid:ravnica_hybrid) }
	storyadv_lp_background := { color_background(type:"storyadvlp",     base_hybrid:card_hybrid) }

	tale_background := { color_background(type:"tale",     base_hybrid:card_hybrid) }
	tale_pt_background := { color_background(type:"talept",     base_hybrid:card_hybrid) }

	dossier_background := { color_background(type:"dossier",     base_hybrid:card_hybrid) }
	dossier_crown_background := { color_background(type:"dossiercrown",     base_hybrid:card_hybrid) }

	magnified_background := { color_background(type:"magnified",     base_hybrid:card_hybrid) }


	pipboy_background := { color_background(type:"pipboy",     base_hybrid:card_hybrid) }
	pipboy_crown_background := { color_background(type:"pipboycrown",     base_hybrid:card_hybrid) }

	vault_background := { color_background(type:"vault",     base_hybrid:card_hybrid) }
	vault_crown_background := { color_background(type:"vaultcrown",     base_hybrid:card_hybrid) }
	vault_pt_background := { color_background(type:"vaultpt",     base_hybrid:card_hybrid) }
	vaultstamp_background := { color_background(type:"vaultstamp",     base_hybrid:stamp_hybrid) }

	breakingnews_background := { color_background(type:"breakingnews",     base_hybrid:card_hybrid) }
	breakingnews_crown_background := { color_background(type:"breakingnewscrown",     base_hybrid:card_hybrid) }
	breakingnews_pt_background := { color_background(type:"breakingnewspt",     base_hybrid:card_hybrid) }

	memory_background := { color_background(type:"memory",     base_hybrid:card_hybrid) }
	memory_pt_background := { color_background(type:"memorypt",     base_hybrid:card_hybrid) }

	lcilegend_background := { color_background(type:"lcilegend",     base_hybrid:card_hybrid) }
	lcilegend_crown_background := { color_background(type:"crownall",     base_hybrid:card_hybrid) }
	lcilegend_pt_background := { color_background(type:"ptall",     base_hybrid:card_hybrid) }

	paranormal_background := { color_background(type:"paranormal",     base_hybrid:card_hybrid) }
	paranormal_crown_background := { color_background(type:"crownall",     base_hybrid:card_hybrid) }
	paranormal_pt_background := { color_background(type:"ptall",     base_hybrid:card_hybrid) }
	paranormal_stamp_background := { color_background(type:"paranormalstamp",     base_hybrid:stamp_hybrid) }

	jpshowcase_background := { color_background(type:"jpshowcase",     base_hybrid:card_hybrid) }
	jpshowcase_pt_background := { color_background(type:"jpshowcasept",     base_hybrid:card_hybrid) }
	jpshowcase_stamp_background := { color_background(type:"jpshowcasestamp",     base_hybrid:stamp_hybrid) }

	draconic_background := { color_background(type:"draconic",     base_hybrid:special_card_hybrid) }
	draconic_stamp_background := { color_background(type:"draconicstamp",     base_hybrid:stamp_hybrid) }
	draconic_pt_background := { color_background(type:"draconicpt",     base_hybrid:card_hybrid) }

	stellar_background := { color_background(type:"stellar",     base_hybrid:special_card_hybrid) }
	stellar_pt_background := { color_background(type:"stellarpt",     base_hybrid:special_card_hybrid) }
	stellarpost_background := { color_background(type:"stellarpost",     base_hybrid:special_card_hybrid) }

	# texless_background := { color_background(type:"texless",     base_hybrid:card_hybrid) }

	zdktll_background := { color_background(type:"zdktll",     base_hybrid:card_hybrid) }
	instll_background := { color_background(type:"instll",     base_hybrid:card_hybrid) }
	thstll_background := { color_background(type:"thstll",     base_hybrid:card_hybrid) }
	onetll_background := { color_background(type:"onetll",     base_hybrid:card_hybrid) }
	
	unstable_background := { color_background(type:"unstable",     base_hybrid:card_hybrid) }
	unfinityland_background := { color_background(type:"unfinityland",     base_hybrid:card_hybrid) }
	
	use_main_rarity := { contains(set.mainframe_rarity_name, match: ".png")}
	un_png := replace@(match:".png", replace: "")
	

	image_chose := {
		if styling.frames=="invention" then invention_background()
		else if styling.frames=="goldenage" then goldenage_background()
		else if styling.frames=="zendikar rising expeditions" then znr_background()
		else if styling.frames=="zendikar expeditions" then exp_background()
		else if styling.frames=="ninja" then ninja_background()
		else if styling.frames=="samurai" then samurai_background()
		else if styling.frames=="phyrexian" then phyrexian_background()
		else if styling.frames=="textless land(zendikar)" then zdktll_background()
		else if styling.frames=="textless land(innistrad)" then instll_background()
		else if styling.frames=="textless land(theros)" then thstll_background()
		else if styling.frames=="textless land(unstable)" then unstable_background()
		else if styling.frames=="textless land(unfinity)" then unfinityland_background()
		else if styling.frames=="textless land(All will be one)" then onetll_background()
		else if styling.frames=="dnd sourcebook" then dndsb_background()
		else if styling.frames=="sketch" then sketch_background()
		else if styling.frames=="etched" then if card.card_color == "land" then "etched/clcard.png" else etched_background()
		else if styling.frames=="equinox" then equinox_background()
		else if styling.frames=="magicfest" then magicfest_background()
		else if styling.frames=="artdeco" then artdeco_background()
		else if styling.frames=="fang" then fang_background()
		else if styling.frames=="skyscraper" then skyscraper_background()
		else if styling.frames=="ravnica" then ravnica_background()
		else if styling.frames=="ixalan" then ixalan_background()
		else if styling.frames=="tarkir" then tarkir_background()
		else if styling.frames=="crystal" then crystal_background()
		else if styling.frames=="invocation" then invocation_background()
		else if styling.frames=="ring" then ring_background()
		else if styling.frames=="scroll" then scroll_background()
		else if styling.frames=="tardis" then tardis_background()
		else if styling.frames=="glass" then glass_background()
		else if styling.frames=="bot" then if is_legend() then "bot/lcard.png" else "bot/card.png"
		else if styling.frames=="mystical archive" then archive_background()
		else if styling.frames=="storybook" then storybook_background()
		else if styling.frames=="storybook adventure" then storyadv_background()
		else if styling.frames=="tale" then tale_background()
		else if styling.frames=="pipboy" then pipboy_background()
		else if styling.frames=="vault" then vault_background()
		else if styling.frames=="lcilegend" then lcilegend_background()
		else if styling.frames=="dossier" then dossier_background()
		else if styling.frames=="magnified" then magnified_background()
		else if styling.frames=="breakingnews" then breakingnews_background()
		else if styling.frames=="memory corridor" then memory_background()
		else if styling.frames=="imaginecritters" then if card.pt != "" then "imaginecritters/card1.png" else "imaginecritters/card.png"
		else if styling.frames=="paranormal" then paranormal_background()
		else if styling.frames=="jpshowcase" then jpshowcase_background()
		else if styling.frames=="ghostfire" then if card.pt != "" then "ghostfire/cardpt.png" else "ghostfire/card.png"
		else if styling.frames=="draconic" then draconic_background()
		else if styling.frames=="stellarsights" then stellar_background()
		else if styling.frames=="stellarsightsposter" then stellarpost_background()

		else if styling.frames=="neon" and is_vehicle() and chosen(choice:"colorless", card.card_color) then "neon/voverlay.png"
		else if styling.frames=="neon" then if (is_rare() and styling.use_holofoil_stamps) then neon_background() else neon_background2()
		else ""
	}
	
	frame_mask_chose := {
		if contains(styling.custom_mask, match:".png") then ("/magic-m15-showcase-mixed-HD.mse-style/custom-mask/" + styling.custom_mask) else
		if styling.frames=="invention" then "invention/frame_mask.png"
		else if styling.frames=="goldenage" then "goldenage/frame_mask.png"
		else if styling.frames=="zendikar rising expeditions" then "expedition/znr/frame_mask.png"
		else if styling.frames=="zendikar expeditions" then "expedition/exp/frame_mask.png"
		else if styling.frames=="neon" then "neon/frame_mask.png"
		else if styling.frames=="ninja" then "ninja/frame_mask.png"
		else if styling.frames=="samurai" then "samurai/frame_mask.png"
		else if styling.frames=="textless land(zendikar)" then "tll/zdk/frame_mask.png"
		else if styling.frames=="textless land(innistrad)" then "tll/ins/frame_mask.png"
		else if styling.frames=="textless land(theros)" then "tll/ths/frame_mask.png"
		else if (styling.frames=="textless land(All will be one)" and is_ub()) then "tll/one/ub/frame_mask.png"
		else if styling.frames=="textless land(All will be one)" then "tll/one/frame_mask.png"
		else if styling.frames=="dnd sourcebook" then "sourcebook/frame_mask.png"
		else if styling.frames=="sketch" then "sketch/frame_mask.png"
		else if styling.frames=="textless land(unstable)" then "unstable/frame_mask.png"
		else if styling.frames=="textless land(unfinity)" then "unfinityland/frame_mask.png"
		else if styling.frames=="etched" then "etched/frame_mask.png"
		else if styling.frames=="equinox" then "equinox/frame_mask.png"
		else if styling.frames=="magicfest" then "magicfest/frame_mask.png"
		else if styling.frames=="artdeco" then "artdeco/frame_mask.png"
		else if styling.frames=="skyscraper" then "skyscraper/frame_mask.png"
		else if styling.frames=="fang" then "fang/frame_mask.png"
		else if styling.frames=="ravnica" then "ravnica/frame_mask.png"
		else if styling.frames=="ixalan" then "ixalan/frame_mask.png"
		else if styling.frames=="mystical archive" then "archive/frame_mask.png"
		else if styling.frames=="tarkir" then "tarkir/frame_mask.png"
		else if styling.frames=="crystal" and (is_rare() and styling.use_holofoil_stamps) then "crystal/frame_mask.png"
		else if styling.frames=="crystal" then "crystal/back/frame_mask.png"
		else if styling.frames=="invocation" then "invocation/frame_mask.png"
		else if styling.frames=="scroll" then "scroll/frame_mask.png"
		else if styling.frames=="ring" then "ring/frame_mask.png"
		else if styling.frames=="tardis" then "tardis/frame_mask.png"
		else if styling.frames=="glass" then "glass/frame_mask.png"
		else if styling.frames=="bot" then "bot/frame_mask.png"
		else if styling.frames=="storybook" then "storybook/frame_mask.png"
		else if styling.frames=="storybook adventure" then "storybook/adventure/frame_mask.png"
		else if styling.frames=="tale" then "tale/frame_mask.png"
		else if styling.frames=="pipboy" then "pipboy/frame_mask.png"
		else if styling.frames=="vault" then "vault/frame_mask.png"
		else if styling.frames=="lcilegend" then "lcilegend/frame_mask.png"
		else if styling.frames=="dossier" then "dossier/frame_mask.png"
		else if styling.frames=="magnified" then "magnified/frame_mask.png"
		else if styling.frames=="breakingnews" then "breakingnews/frame_mask.png"
		else if styling.frames=="memory corridor" then "memory/frame_mask.png"
		else if styling.frames=="imaginecritters" then "imaginecritters/frame_mask.png"
		else if styling.frames=="paranormal" then "paranormal/frame_mask.png"
		else if styling.frames=="jpshowcase" then "jpshowcase/frame_mask.png"
		else if styling.frames=="ghostfire" then "ghostfire/frame_mask.png"
		else if styling.frames=="draconic" then "draconic/frame_mask.png"
		else if styling.frames=="stellarsights" then "stellarsights/frame_mask.png"
		else if styling.frames=="stellarsightsposter" then "stellarsights/poster/frame_mask.png"
		else "frame_mask.png"
	}
	
	pt_box_chose := {
		if styling.frames=="invention" then "invention/pt.png"
		else if styling.frames=="goldenage" then "goldenage/pt.png"
		else if styling.frames=="dnd sourcebook" then "sourcebook/pt.png"
		else if styling.frames=="sketch" then sketch_pt_background()
		else if styling.frames=="tardis" then "tardis/pt.png"

		else if styling.frames=="neon" and is_vehicle() then "neon/pt/vpt.png"

		else if styling.frames=="etched" then if card.card_color == "land" then "etched/pt/clpt.png" else etched_pt_background()
		else if styling.frames=="equinox" then equinox_pt_background()
		else if styling.frames=="artdeco" then artdeco_pt_background()
		else if styling.frames=="fang" then fang_pt_background()
		else if styling.frames=="ravnica" then ravnica_pt_background()
		else if styling.frames=="mystical archive" then archive_pt_background()
		else if styling.frames=="ixalan" then ixalan_pt_background()
		else if styling.frames=="tarkir" then tarkir_pt_background()
		else if styling.frames=="crystal" then crystal_pt_background()
		else if styling.frames=="invocation" then "invocation/pt.png"
		else if styling.frames=="ring" then ring_pt_background()
		else if styling.frames=="scroll" then scroll_pt_background()
		else if styling.frames=="glass" then glass_pt_background()
		else if styling.frames=="bot" then "bot/pt.png"
		else if styling.frames=="storybook" or styling.frames=="storybook adventure" then storybook_pt_background()
		else if styling.frames=="tale" then tale_pt_background()
		else if styling.frames=="pipboy" then "pipboy/pt.png"
		else if styling.frames=="dossier" then "dossier/pt.png"
		else if styling.frames=="vault" then vault_pt_background()
		else if styling.frames=="lcilegend" then lcilegend_pt_background()
		else if styling.frames=="breakingnews" then breakingnews_pt_background()
		else if styling.frames=="memory corridor" then memory_pt_background()
		else if styling.frames=="paranormal" then paranormal_pt_background()
		else if styling.frames=="jpshowcase" then jpshowcase_pt_background()
		else if styling.frames=="imaginecritters" then ""
		else if styling.frames=="ghostfire" then ""
		else if styling.frames=="draconic" then draconic_pt_background()
		else if styling.frames=="stellarsights" then stellar_pt_background()
		else card_ptbox()
	}
	
	img_set := { 
			 if styling.frames=="invention" then "30,30,690,939"
		else if styling.frames=="goldenage" then "48,54,654,941"
		else if styling.frames=="zendikar rising expeditions" then "30,114,692,742"
		else if styling.frames=="zendikar expeditions" then "56,116,638,735"
		else if styling.frames=="neon" then "28,40,695,923"
		else if styling.frames=="ninja" then "30,118,692,464"
		else if styling.frames=="samurai" then "30,132,692,462"
		else if styling.frames=="dnd sourcebook" then "30,115,690,476"
		else if styling.frames=="equinox" then "56.5,57,642,913"
		else if styling.frames=="magicfest" then "46,52,658,907"
		else if styling.frames=="textless land(zendikar)" then "56,116,638,735"
		else if styling.frames=="textless land(innistrad)" then "28,30,693,946"
		else if styling.frames=="textless land(theros)" then "28,30,693,946"
		else if styling.frames=="textless land(All will be one)" then "28,30,693,946"
		else if styling.frames=="textless land(unstable)" then "0,0,750,975"
		else if styling.frames=="textless land(unfinity)" then "0,0,750,975"
		else if styling.frames=="artdeco" then "33,99,684,488"
		else if styling.frames=="skyscraper" then "67,118,616,465"
		else if styling.frames=="fang" then "59.5,117,631,464"
		else if styling.frames=="ravnica" then "54,118.5,641,465"
		else if styling.frames=="mystical archive" then "0,127,750,785"
		else if styling.frames=="ixalan" then "60.5,115,630,465"
		else if styling.frames=="tarkir" then "66,116,617.5,464"
		else if styling.frames=="crystal" and (is_rare() and styling.use_holofoil_stamps) then "0,0,750,970"
		else if styling.frames=="crystal" then "30,30,690,940"
		else if styling.frames=="invocation" then "86,156,577,411"
		else if styling.frames=="ring" then "74, 125.5, 602, 460"
		else if styling.frames=="tardis" then "57.5, 132, 635.5, 449"
		else if styling.frames=="glass" then "30, 116.5, 690, 468"
		else if styling.frames=="bot" then "0,0,750,965"
		else if styling.frames=="storybook" or styling.frames=="storybook adventure" then "28, 31, 698, 578"
		else if styling.frames=="tale" then "0, 56, 750, 910"
		else if styling.frames=="pipboy" then "57,133.5,635,433"
		else if styling.frames=="vault" then "0,125,750,445"
		else if styling.frames=="lcilegend" then "30,30,690,985"
		else if styling.frames=="dossier" then "38.5,136.5,659,428"
		else if styling.frames=="magnified" then "28,0,694,683"
		else if styling.frames=="breakingnews" then "39.5,178.5,672.5,424"
		else if styling.frames=="memory corridor" then "0,0,750,587"
		else if styling.frames=="imaginecritters" then if card.pt != "" then "0,0,750,990" else "0,0,750,965"
		else if styling.frames=="paranormal" then "59,122,589,449"
		else if styling.frames=="jpshowcase" then "0,0,750,969"
		else if styling.frames=="ghostfire" then "36,42.5,678,897.5"
		else if styling.frames=="draconic" then "25,120,698,469"
		else if styling.frames=="stellarsights" then "0,0,750,969"
		else if styling.frames=="stellarsightsposter" then "0,0,750,974"
		else "56,117,638,468"
	}
	
	img_left := {to_number(pull_comma_array(img_set(), cell:0, end:false))}
	img_top := {to_number(pull_comma_array(img_set(), cell:1, end:false))}
	img_width := {to_number(pull_comma_array(img_set(), cell:2, end:false))}
	img_height := {to_number(pull_comma_array(img_set(), cell:3, end:false))}

	hover_art_fix_top := {to_number(pull_comma_array(styling.hover_art_fix, cell:0, end:false))}
	hover_art_fix_bot := {to_number(pull_comma_array(styling.hover_art_fix, cell:1, end:false))}
	
	stamp_img_chose := {
		if styling.frames=="mystical archive" then "archive/stamp.png" 
		else if styling.frames=="ravnica" then "ravnica/stamp.png" 
		else if styling.frames=="samurai" then "stamp.png"
		else if styling.frames=="ixalan" then "ixalan/stamp.png"
		else if styling.frames=="tarkir" then "tarkir/stamp.png"
		else if styling.frames=="etched" then if card.card_color == "land" then "etched/stamp/clstamp.png" else etched_stamp_background()
		else if styling.frames=="magicfest" then magicfeststamp_background() 
		else if styling.frames=="invocation" then "invocation/stamp.png"
		else if (styling.frames=="ring" or (styling.frames=="textless land(All will be one)" and is_ub())) then "ring/stamp.png"
		else if styling.frames=="tardis" then "tardis/stamp.png"
		else if styling.frames=="glass" then "glass/stamp.png"
		else if styling.frames=="storybook" or styling.frames=="storybook adventure" then "storybook/stamp.png"
		else if (styling.frames=="scroll" or styling.frames=="pipboy") then "pipboy/stamp.png"
		else if styling.frames=="dossier" then "dossier/stamp.png"
		else if styling.frames=="magnified" then "lcilegend/stamp.png"
		else if styling.frames=="vault" then vaultstamp_background()
		else if styling.frames=="lcilegend" then "lcilegend/stamp.png"
		else if styling.frames=="breakingnews" then "breakingnews/stamp.png"
		else if styling.frames=="memory corridor" then "memory/stamp.png"
		else if styling.frames=="imaginecritters" then ""
		else if styling.frames=="paranormal" then paranormal_stamp_background()
		else if styling.frames=="jpshowcase" then jpshowcase_stamp_background()
		else if styling.frames=="draconic" then draconic_stamp_background()
		else if styling.frames=="stellarsights" or styling.frames=="stellarsightsposter" then "stellarsights/stamp.png"
		else "foil_stamp.png"
	}
	stamp_img_set := {
		if styling.frames=="glass" then "341.5,963,67,33.5"
		else if styling.frames=="etched" then "315,951.5,120,47.5"
		else if styling.frames=="tardis" then "331,954.5,88,40"
		else if styling.frames=="ring" then "322,946.5,106,47.5"
		else if styling.frames=="textless land(All will be one)" then "322,948.5,106,47.5"
		else if styling.frames=="invocation" then "322,937,106,62"
		else if styling.frames=="tarkir" then "319,944,112.5,50.5"
		else if styling.frames=="ixalan" then "330.5,948,88.5,50.5"
		else if styling.frames=="mystical archive" then "330,956,93,39"
		else if styling.frames=="ravnica" then "328.5,943,93.5,48"
		else if styling.frames=="magicfest" then "329.5,944.5,91,53.5"
		else if styling.frames=="samurai" then "327,947,98,49"
		else if styling.frames=="storybook" or styling.frames=="storybook adventure" then "339.5, 958.5, 74, 40.5"
		else if (styling.frames=="scroll" or styling.frames=="pipboy") then "340,959.5,70,39"
		else if styling.frames=="dossier" then "321.26865,947.7612,105.3571,50"
		else if styling.frames=="magnified" then "335.8209,951.4925,79.1045,41.4179"
		else if styling.frames=="vault" then "317.1641,948.2443,115.6716,49.2537"
		else if styling.frames=="lcilegend" then "335.8209,951.4925,79.1045,41.4179"
		else if styling.frames=="breakingnews" then "291.7910,953.3582,166.7910,43.28358"
		else if styling.frames=="memory corridor" then "340.6716,955.597,68.6567,38.4328"
		else if styling.frames=="paranormal" then "320.5224,944.97,108.955224,48.880597"
		else if styling.frames=="jpshowcase" then "327.5,948,95,47.5"
		else if styling.frames=="ghostfire" then "327,942,96,49"
		else if styling.frames=="draconic" then "295.5223,939.1791,158.9552,68.6567"
		else if styling.frames=="stellarsights" or styling.frames=="stellarsightsposter" then "339.5, 958.5, 74, 40.5"
		else "327,947,96,49"
	}
	stamp_img_left := {to_number(pull_comma_array(stamp_img_set(), cell:0, end:false))}
	stamp_img_top := {to_number(pull_comma_array(stamp_img_set(), cell:1, end:false))}
	stamp_img_width := {to_number(pull_comma_array(stamp_img_set(), cell:2, end:false))}
	stamp_img_height := {to_number(pull_comma_array(stamp_img_set(), cell:3, end:false))}

	crown_img_chose := {
		if styling.frames=="fang" then fang_crown_background() 
		else if styling.frames=="sketch" then sketch_crown_background()
		else if styling.frames=="artdeco" then artdeco_crown_background() 
		else if styling.frames=="etched" then if card.card_color == "land" then "etched/crown/clcrown.png" else etched_crown_background() 
		else if styling.frames=="magicfest" then magicfest_crown_background()
		else if styling.frames=="ravnica" then ravnica_crown_background()
		else if styling.frames=="mystical archive" then archive_crown_background()
		else if styling.frames=="phyrexian" then phyrexian_crown_background()
		else if styling.frames=="ixalan" then ixalan_crown_background()
		else if styling.frames=="tarkir" then tarkir_crown_background()
		else if styling.frames=="crystal" then crystal_crown_background()
		else if styling.frames=="ring" then ring_crown_background()
		else if styling.frames=="scroll" then scroll_crown_background()
		else if styling.frames=="tardis" then tardis_crown_background()
		else if styling.frames=="glass" then glass_crown_background()
		else if styling.frames=="storybook" or styling.frames=="storybook adventure" then storybook_crown_background()
		else if styling.frames=="pipboy" then pipboy_crown_background()
		else if styling.frames=="dossier" then dossier_crown_background()
		else if styling.frames=="vault" then vault_crown_background()
		else if styling.frames=="lcilegend" then lcilegend_crown_background()
		else if styling.frames=="breakingnews" then breakingnews_crown_background()
		else if styling.frames=="imaginecritters" then ""
		else if styling.frames=="paranormal" then paranormal_crown_background()
		else if styling.frames=="ghostfire" then ""
		else crown_background()
	}



	#####编号位置####
	is_serialized := { chosen(styling.others, choice:"serialized") }
	serialized_img_set := {
		if styling.frames== "invention" then "78,516"
		else if styling.frames=="mystical archive" then "57,510"
		else if styling.frames=="equinox" then "55,513"
		else if styling.frames=="neon" then "47.5,500"
		else if styling.frames=="goldenage" then "71,516"
		else if styling.frames=="glass" then "48.5, 516"
		else if styling.frames=="ravnica" then "56, 506"
		else if styling.frames=="ixalan" then "60, 510"
		else if styling.frames=="tarkir" then "48, 516"
		else if styling.frames=="crystal" then "48,503"
		else if styling.frames=="storybook" or styling.frames=="storybook adventure" then "74,500"
		else "67,516"
	}
	serialized_img_left := {to_number(pull_comma_array(serialized_img_set(), cell:0, end:false))}
	serialized_img_top := {to_number(pull_comma_array(serialized_img_set(), cell:1, end:false))}

	extra_chop_top := {to_number(pull_comma_array(styling.extra_text_chops, cell:0, end:false))}
	extra_chop_bot := {to_number(pull_comma_array(styling.extra_text_chops, cell:1, end:false))}
	extra_chop_right := {to_number(pull_comma_array(styling.extra_text_chops, cell:2, end:false))}


	
	# d20
	is_d20 := {styling.d20_dividers != "off"}
	is_all_break := {contains(styling.d20_dividers, match:"all breaks")}
	d20string := "^(<b>)?(((</sym>)?[-0-9 ,+>\<](<sym>)?)+|[Ee]lse|[Oo]ther) ?(</b>)?[|]"
	d20_array := 
		filter_text@(match:"(\n|"+d20string+")")
		+split_text@(match:d20string)
	number_of_rolls := {if is_all_break() then 1+length(filter_text(card.rule_text, match:"\n"))-rolls_start(card.text) else length(d20_array(input))-1}
	rolls_start := {
		if styling.d20_dividers == "all breaks +3" then 4
		else if styling.d20_dividers == "all breaks +2" then 3
		else if styling.d20_dividers == "all breaks +1" then 2
		else if styling.d20_dividers == "all breaks" then 0
		else if is_d20() then length(d20_array(input).0)
		else 0
	}
	d20_filter := replace@(match:"^([Ee]lse ?|[Oo]ther ?|((</sym>)?[-0-9 ,+>\<](<sym>)?)+)[|]", replace:"<b>\\1</b>|")

	top_of_para := {
		input := input + no_roll(card.text)
		if card_style.text.layout.paragraphs[input].top or else 0 > 0 then
			card_style.text.top + card_style.text.layout.paragraphs[input].top - 0.5*(card_style.text.layout.paragraphs[input].top-card_style.text.layout.paragraphs[input-1].bottom)
		else 0
	}
	height_of_para := {
		input := input + no_roll(card.text)
		if card_style.text.layout.paragraphs[input].bottom or else 0 > 0 then
			card_style.text.layout.paragraphs[input].bottom + 1.3*(card_style.text.layout.paragraphs[input].top-card_style.text.layout.paragraphs[input-1].bottom) - card_style.text.layout.paragraphs[input].top
		else 0
	}
	no_roll := {if styling.d20_dividers == "all breaks" then 1 else if rolls_start(input) == 0 then 1 else 0}
	text_filter := text_filter + d20_filter + {input}
	overlay1 := {if is_d20() then "d20slice.png" else slice_crop(background_slide(), height: lv_2_height(), width:630, distance:(152-lv_2_coordinate()))}
	overlay2 := {if is_d20() then "d20slice.png" else slice_crop(background_slide_2(), height: lv_3_height(), width:630, distance:lv_3_height())}
	overlay3 := {if is_d20() then "d20slice.png" else slice_crop(background_slide_3(), height: lv_4_height(), width:630, distance:lv_4_height())}
############################################################## Set info fields
set info style:
	symbol:
		variation:
			name: invertedcommon
			border radius: 0.10
			fill type: solid
			fill color:   rgb(255,255,255)
			border color: rgb(0,0,0)
############################################################## Extra style options
### 通用1 ###
include file: /magic-all-style.mse-include/style1

styling field:
	type: choice
	name: frames
	description: 使用边框
	choice: etched

	choice: invention

	choice: zendikar rising expeditions
	choice: zendikar expeditions

	choice: phyrexian

	choice: mystical archive

	choice: dnd sourcebook

	choice: sketch

	choice: equinox
	choice: fang
	choice: magicfest

	choice: neon
	choice: ninja
	choice: samurai

	choice: goldenage
	choice: artdeco
	choice: skyscraper

	choice: glass

	choice: bot

	choice: ravnica
	choice: ixalan
	choice: tarkir
	choice: crystal

	choice: storybook
	choice: storybook adventure
	choice: tale

	choice: invocation

	choice: scroll
	choice: ring
	choice: tardis

	choice: lcilegend

	choice: dossier
	choice: magnified

	choice: pipboy

	choice: vault
	choice: breakingnews

	choice: memory corridor

	choice: imaginecritters

	choice: paranormal

	choice: jpshowcase

	choice: ghostfire
	choice: draconic

	choice: stellarsights
	choice: stellarsightsposter

	choice: textless land(zendikar)
	choice: textless land(innistrad)
	choice: textless land(theros)
	choice: textless land(unstable)
	choice: textless land(All will be one)
	choice: textless land(unfinity)
	initial: etched
styling field:
	type: text
	name: shrink ubcopyright text
	description: Shrinks ub copyright X pixels
styling field:
	type: choice
	name: d20 dividers
	choice: d20 mode
	choice: off
	choice: all breaks
	choice: all breaks +1
	choice: all breaks +2
	choice: all breaks +3
	description: 正常地d20分隔，关闭，每一段隔断，在除第一段以外每一段隔断，等等。
styling field:
	type: text
	name: hover art fix
	description: dnd法术书出框上下调整, Format as "X,Y". 向上 X 像素向下 Y 像素.
styling field:
	type: text
	name: custom mask
	description: Uses a custom mask from data/magic-mainframe-extras.mse-include


styling field:
	type: multiple choice
	name: others
	description: 其它选项
	choice: use alias
	choice: hover art
	choice: hide type and rarity
	choice: original background
	choice: universe beyond(For some frames)
	choice: use phyrexian font
	choice: serialized
	choice: use shadow
	choice: second copyright
styling field:
	type: text
	name: shrink adventure name text
	description: 历险牌牌名字体大小
styling field:
	type: text
	name: extra text chops
	description: Format as "X,Y,Z". For textbox of adventure.
styling field:
	type: text
	name: font cap extra
	description: 额外文本框的字体大小。（试作大小默认为22.25，历险默认为26，合变默认为28）
styling field:
	type: boolean
	name: use holofoil stamps
	description: Change to no to disable rare holofoil stamps
styling field:
	type: boolean
	name: center name
	description: 牌名居中？
	initial: no
styling field:
	type: boolean
	name: is foil
	description: 是否为闪卡？
	initial: no

### 通用2 ###
include file: /magic-all-style.mse-include/style2

styling style:
	use guild mana symbols:
		choice images:
			yes: /magic-mana-small.mse-symbol-font/mana_guild_rg.png
			no:  /magic-mana-small.mse-symbol-font/mana_rg.png
	tap symbol:
		render style: both
		choice images:
			modern:     /magic-mana-large.mse-symbol-font/mana_t.png
			old:        /magic-mana-large.mse-symbol-font/mana_t_old.png
			diagonal T: /magic-mana-large.mse-symbol-font/mana_t_older.png
	center text:
		render style: both
		choice images:
			always:          /magic.mse-game/icons/center-all-text.png
			short text only: /magic.mse-game/icons/center-short-text.png
			never:           /magic.mse-game/icons/center-no-text.png
	inverted common symbol:
		choice images:
			no:  { symbol_variation(symbol: set.symbol, variation: "common") }
			yes: { symbol_variation(symbol: set.symbol, variation: "invertedcommon") }

	frames:
		choice images:
			etched : 						etched/ucard.png
			invention : 					invention/ucard.png
			zendikar rising expeditions : 	expedition/znr/ucard.png
			zendikar expeditions : 			expedition/exp/ucard.png
			phyrexian : 					phyrexian/ucard.png
			mystical archive : 				archive/ucard.png
			dnd sourcebook : 				sourcebook/frame.png
			equinox : 						equinox/ucard.png
			fang : 							fang/ucard.png
			magicfest : 					magicfest/ucard.png
			neon : 							neon/ucard.png
			ninja : 						ninja/ucard.png
			samurai : 						samurai/ucard.png
			goldenage : 					goldenage/frame.png
			artdeco : 						artdeco/ucard.png
			skyscraper : 					skyscraper/ucard.png
			glass : 						glass/ucard.png
			bot : 							bot/card.png
			ravnica : 						ravnica/ucard.png
			ixalan : 						ixalan/ucard.png
			tarkir : 						tarkir/ucard.png
			crystal : 						crystal/ucard.png
			storybook : 					storybook/ucard.png
			storybook adventure : 			storybook/adventure/ucard.png
			tale : 							tale/ucard.png
			invocation : 					invocation/ucard.png
			scroll : 						scroll/ucard.png
			ring : 							ring/ucard.png
			tardis : 						tardis/ucard.png
			dossier : 						dossier/ucard.png
			magnified:						magnified/u.png
			pipboy : 						pipboy/ucard.png
			vault : 						vault/ucard.png
			lcilegend:						lcilegend/ucard.png
			breakingnews : 					breakingnews/ucard.png
			memory corridor : 				memory/u.png
			textless land(zendikar) : 		tll/zdk/ucard.png
			textless land(innistrad) : 		tll/ins/ucard.png
			textless land(theros) : 		tll/ths/ucard.png
			textless land(unstable) : 		unstable/ucard.png
			textless land(All will be one): tll/one/ucard.png
			textless land(unfinity) : 		unfinityland/ucard.png
			imaginecritters: 				imaginecritters/card.png
			paranormal:						paranormal/u.png
			jpshowcase:						jpshowcase/u.png
			ghostfire:						ghostfire/card.png
			draconic:						draconic/u.png
			sketch:							sketch/ucard.png

	others:
		render style: checklist
		direction: vertical

############################################################## Cards fields
card style:
	############################# Background stuff
	card color:
		left:	0
		top:	0
		width: 750
		height: 1050
		z index: 1
		render style: image
		popup style: in place
		image: { image_chose() }
		mask: { frame_mask_chose() }

	card color 2:
		left: { if styling.frames=="storybook adventure" then 43 else  0 }
		top:  { if styling.frames=="storybook adventure" then 642 else  0 }
		width: { if styling.frames=="storybook adventure" then 333.5 else  0 }
		height: { if styling.frames=="storybook adventure" then 342 else  0 }
		render style: image
		popup style: in place
		image: {storyadv_lp_background()}
		z index: 1
		visible: {styling.frames=="storybook adventure"}
	############################# Name line
	name:
		left:
			script:
				if styling.frames=="breakingnews" then if set.card_language != "简体中文" then (375 - max(100,card_style.name.content_width)*0.5) else (375 - max(100,card_style.name.content_width)*0.446)
				else if styling.frames=="equinox" then 74
				else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then 57 else 56
				else if styling.frames=="stellarsights" then 51
				else if  styling.frames=="stellarsightsposter" then 60
				else 64
		top: 
			script:
				(if chosen(styling.others, choice:"use phyrexian font") then shrink_name()/2 else 0)
				+ (if set.card_language != "简体中文" then 2 else 0)
				+
				if styling.frames=="textless land(unstable)" then 10
				else if styling.frames=="dnd sourcebook" or styling.frames=="goldenage" then 60
				else if styling.frames=="equinox" then 61
				else if styling.frames=="invention" then 64 
				else if styling.frames=="samurai" then 74 
				else if styling.frames=="tarkir" then 55
				else if styling.frames=="ring" then 64
				else if styling.frames=="dossier" then (55+(if set.card_language == "简体中文" then -4 else 0 ))
				else if styling.frames=="storybook" or styling.frames=="storybook adventure" then 59
				else if (styling.frames=="pipboy") and set.card_language == "简体中文" then 59
				else if styling.frames=="breakingnews" then if set.card_language != "简体中文" then 91 else 96
				else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then 53 else 50
				else if styling.frames=="imaginecritters" then 52
				else if styling.frames=="paranormal" then 44
				else if styling.frames=="ghostfire" then 60
				else if styling.frames=="stellarsights" then if set.card_language != "简体中文" then 641 else 640
				else if styling.frames=="stellarsightsposter" then if set.card_language != "简体中文" then 642.5 else 641.5
				else 57
		right:
			script:
				if styling.frames=="breakingnews" then if set.card_language != "简体中文" then (375 + max(100,card_style.name.content_width)*0.5) else (375 + max(100,card_style.name.content_width)*0.446)
				else if (styling.frames=="textless land(unstable)" or styling.frames=="textless land(unfinity)") and styling.center_name then 686
				else (682 - max(0, card_style.casting_cost.content_width))
		height: {if styling.frames=="breakingnews" then (70) else (46 - 0.5*shrink_name())}
		alignment:
			script:
				if chosen(styling.others, choice:"use phyrexian font") then "top shrink-overflow"
				else if styling.frames=="pipboy" then "middle shrink-overflow"
				else if styling.frames=="breakingnews" and set.card_language == "简体中文" then "middle stretch-overflow"
				else if styling.center_name then "bottom center shrink-overflow"
				else "bottom shrink-overflow"
		padding bottom: 0
		z index: 4
		angle: {if styling.frames=="dossier" then -1 else 0}
		font:
			name: 
				script:
					if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0"
					else if (styling.frames=="tardis" and set.card_language != "简体中文") then "Gill Sans"
					else if (styling.frames=="pipboy") then if set.card_language != "简体中文" then "OCR1SSK" else "DFPHeiW7-GB"
					else if (styling.frames=="breakingnews") then if set.card_language != "简体中文" then "Saloon Girl" else "华康标题宋 Std W9"
					else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then "DINNextW01-Bold" else "DFHei-GB Otf"
					else if styling.frames=="stellarsights" then if set.card_language != "简体中文" then "Magic-Fomalhaut" else "字小魂芯科幻体(商用需授权)"
					else if set.card_language != "简体中文" then "Beleren Bold"
					else "华康魏碑 Std W7"
			size:
				script:
					(if styling.frames=="pipboy" and set.card_language != "简体中文" then 23
					else if styling.frames=="breakingnews" then if set.card_language != "简体中文" then 49 else 33
					else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then 25 else 26.2
					else if styling.frames=="stellarsights" then if set.card_language != "简体中文" then 30 else 32
					else if styling.frames=="stellarsightsposter" then if set.card_language != "简体中文" then 30 else 32
					else if set.card_language != "简体中文" then 32 else 34)
					- shrink_name()
			color:
				script:
					if styling.frames=="breakingnews" then rgb(52, 46, 48)
					else if styling.frames=="stellarsights" or styling.frames=="stellarsightsposter" or styling.frames=="magnified" or styling.frames=="ghostfire" or styling.frames=="jpshowcase" or styling.frames=="paranormal" or styling.frames=="bot" or styling.frames=="textless land(unfinity)" or styling.frames=="imaginecritters" or styling.frames=="crystal" or styling.frames=="pipboy" or styling.frames=="glass" or styling.frames=="tardis" or styling.frames=="ring" or styling.frames=="ixalan" or styling.frames=="skyscraper" or styling.frames=="artdeco" or styling.frames=="magicfest" or styling.frames=="goldenage" or styling.frames=="neon" or styling.frames=="ninja" or styling.frames=="samurai" or styling.frames=="textless land(innistrad)" or styling.frames=="textless land(unstable)" or styling.frames=="etched" then "white"
					else "black"
			#影子实现
			shadow color: script: if (has_shadow()) then rgba(0,0,0,255) else rgba(0,0,0,0)
			shadow displacement x: 2.5
			shadow displacement y: 2.5
			shadow blur: -1

	casting cost:
		right:
			script:
				if styling.frames=="dossier" then 670
				else if styling.frames=="fang" then 684
				else if styling.frames=="equinox" then 688
				else if styling.frames=="invention" or styling.frames=="goldenage" then 684
				else if styling.frames=="breakingnews" then 710
				else 692
		top: 
			script:
				if styling.frames=="textless land(unstable)" then 10 
				else if styling.frames=="invention" then 64 
				else if styling.frames=="goldenage" or styling.frames=="dnd sourcebook" or styling.frames=="equinox" then 61 
				else if styling.frames=="magicfest" then 59
				else if styling.frames=="samurai" then 74
				else if styling.frames=="artdeco" then 59
				else if styling.frames=="ring" then 64
				else if styling.frames=="tardis" then 61
				else if styling.frames=="storybook" or styling.frames=="storybook adventure" then 59
				else if styling.frames=="pipboy" then 59
				else if styling.frames=="dossier" then 68
				else if styling.frames=="vault" then 59
				else if styling.frames=="lcilegend" then 59
				else if styling.frames=="breakingnews" then 33
				else if styling.frames=="imaginecritters" then 52
				else if styling.frames=="paranormal" then 44
				else if styling.frames=="ghostfire" then 60
				else if styling.frames=="stellarsights" then 641
				else if styling.frames=="stellarsightsposter" then 642.5 
				else 57
		width: { max(60, card_style.casting_cost.content_width) + 10 }
		height: 46
		alignment: middle right
		angle: {if styling.frames=="dossier" then -1 else 0}
		font:
			name: MPlantin
			size: 30
		symbol font:
			name:
				script:
					if styling.frames=="breakingnews" then "magic-mana-thunder-junction-breaking-news.mse-symbol-font"
					else if styling.frames=="mystical archive" or styling.frames=="dossier" then "magic-mana-small-strixhaven"
					else "magic-mana-large"
			size: 30
			alignment: middle right
		always symbol: true
		z index: 5
		padding top: 0

	alias:
		left: {108 + (if chosen(styling.others, choice:"use alias") then 0 else 1000)}
		top: {if styling.frames=="pipboy" then 118 else 116}
		width: 536
		height: 30
		z index: 7
		visible: { chosen(styling.others, choice:"use alias") }
		font:
			name: 
				script:
					if styling.frames=="pipboy" then
						if set.card_language != "简体中文" then "Neo Sans Pro" else "华康圆体 - Kelvin"
					else 
						if set.card_language != "简体中文" then "MPlantin-Italic" else ch_flavor_font()
			size: {if styling.frames=="pipboy" then 17 else 20}
			scale down to: 6
			color: white
		alignment: middle center

	name 2:
		left: {if styling.frames=="storybook adventure" then 64 else 0 }
		top: {(if styling.frames=="storybook adventure" then if set.card_language != "简体中文" then 666 else 660 else 0)}
		right: { if styling.frames=="storybook adventure" then (356 - max(0, card_style.casting_cost_2.content_width)) else 0 }
		height: { if styling.frames=="storybook adventure" then (40 - 0.5*shrink_adventure_name()) else 0 }
		alignment: { if chosen(styling.others, choice:"use phyrexian font") then "middle shrink-overflow" else "bottom shrink-overflow"}
		z index: 4
		font:
			name: { if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0" else if set.card_language != "简体中文" then "Beleren Bold" else "华康魏碑 Std W7" }
			size: {26 - shrink_adventure_name() }
			color: white
		
	casting cost 2:
		right: {if styling.frames=="storybook adventure" then 360 else 0 }
		top: {if styling.frames=="storybook adventure" then 659 else 0 }
		width: { if styling.frames=="storybook adventure" then max(20, card_style.casting_cost_2.content_width) + 10 else 0}
		height: {if styling.frames=="storybook adventure" then 50 else 0 }
		alignment: middle right
		symbol font:
			name: magic-mana-large
			size: {if styling.frames=="storybook adventure" then 25 else 0 }
			alignment: middle right
		always symbol: true
		z index: 5
		padding top: 0

	############################# Image   else if styling.frames=="" then else
	image:
		left: { img_left() }
		top: { img_top() }
		# width: { if styling.hover_art and (styling.frames=="ixalan" or styling.frames=="dnd sourcebook") then 0 else img_width() }
		# height: { if styling.hover_art and (styling.frames=="ixalan" or styling.frames=="dnd sourcebook") then 0 else img_height() }
		width: { img_width() }
		height: { img_height() }
		
		z index: -2
		default: {default_image(card.card_color)}

	mainframe image:
		left: { 30 }
		top: { 85 + (if styling.hover_art_fix != "" then to_number(hover_art_fix_top()) else 0)}
		width: { if chosen(styling.others, choice:"hover art") then 690 else 0}
		bottom: { if chosen(styling.others, choice:"hover art") then 591 + (if styling.hover_art_fix != "" then to_number(hover_art_fix_bot()) else 0) else 0}
		z index: 1
		default: {default_image(card.card_color)}
	############################# Card type
	indicator:
		left: { if styling.frames=="invention" then 64 else 62 }
		top: { if styling.frames=="invention" then 603 else 604 }
		width: 34
		height: 34
		z index: 1
		render style: image
		visible: { has_identity() }
		image: { card_identity() }


	type:
		left:
			script:
				(if has_identity() then 102 else 64)+

				(if styling.frames=="equinox" then 10
				else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then -11 else -12
				else if is_tll() and styling.frames!="textless land(theros)" then 1000
				else 0)

				+ (if styling.frames=="textless land(All will be one)" then 74 else 0)
		top: 
			script:
				shrink_type()/2 + 
				(if styling.frames=="invention" then 597 
				else if styling.frames=="dnd sourcebook" then 603 
				else if (styling.frames=="zendikar rising expeditions" or styling.frames=="zendikar expeditions") then 862 
				else if styling.frames=="textless land(theros)" then 893
				else if styling.frames=="textless land(All will be one)" then 893
				else if styling.frames=="equinox" then 598
				else if styling.frames=="tarkir" then 595
				else if styling.frames=="storybook" or styling.frames=="storybook adventure" then 599
				else if styling.frames=="tale" then 599
				else if styling.frames=="pipboy" and set.card_language == "简体中文" then 599
				else if styling.frames=="dossier" then (599+(if set.card_language == "简体中文" then -3 else 0 ))
				else if styling.frames=="breakingnews" then 628
				else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then 600 else 598
				else if styling.frames=="jpshowcase" then 650
				else if styling.frames=="ghostfire" then 547
				else if styling.frames=="stellarsights" then 704
				else if styling.frames=="stellarsightsposter" then 684
				else 597) +
				if chosen(styling.others, choice:"hide type and rarity") then 1000 else 0
		width:
			script:
				if styling.frames=="breakingnews" then (max(20,card_style.type.content_width)*0.892)
				else ((if has_identity() then "580" else "610")
				- max(44,card_style.rarity.content_width)
				- (if styling.frames=="textless land(All will be one)" then 74 else 0))
		height: { 40 - shrink_type() }
		alignment: 
			script:
				if styling.frames=="pipboy" or styling.frames=="breakingnews" then "middle shrink-overflow"
				else if styling.frames=="breakingnews" and set.card_language == "简体中文" then "top stretch-overflow"
				else "top shrink-overflow"
		z index: 2
		padding top: 2
		angle: {if styling.frames=="dossier" then 0.5 else 0}
		font:
			name: 
				script:
					if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0"
					else if (styling.frames=="tardis" and set.card_language != "简体中文") then "Gill Sans"
					else if styling.frames=="pipboy" then if set.card_language != "简体中文" then "Neo Sans Pro" else "DFPHeiW7-GB"
					else if styling.frames=="breakingnews" then if set.card_language != "简体中文" then "Saloon Girl" else "华康标题宋 Std W9"
					else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then "DINNextW01-Regular" else "MSE华康黑体W5"
					else if set.card_language != "简体中文" then "Beleren Bold" else "华康魏碑 Std W7"
			size:
				script:
					(if styling.frames=="pipboy" then if set.card_language != "简体中文" then 21.5 else 30
					else if styling.frames=="breakingnews" then if set.card_language != "简体中文" then 34.5 else 26.5
					else if styling.frames=="memory corridor" then if set.card_language != "简体中文" then 20.2 else 23.8
					else if styling.frames=="stellarsights" or styling.frames=="stellarsightsposter" then if set.card_language != "简体中文" then 25.2 else 28
					else if set.card_language != "简体中文" then 26 else 32)
					- shrink_type()
			color:
				script:
					if styling.frames=="breakingnews" then rgb(52, 46, 48)
					else if styling.frames=="stellarsights" or styling.frames=="stellarsightsposter" or styling.frames=="magnified" or styling.frames=="ghostfire" or styling.frames=="jpshowcase" or styling.frames=="paranormal" or styling.frames=="bot" or styling.frames=="imaginecritters" or styling.frames=="crystal" or styling.frames=="pipboy" or styling.frames=="glass" or styling.frames=="tardis" or styling.frames=="ring" or styling.frames=="ixalan" or styling.frames=="artdeco" or styling.frames=="goldenage" or styling.frames=="neon" or styling.frames=="ninja" or styling.frames=="samurai" or styling.frames=="textless land(innistrad)" or styling.frames=="textless land(unstable)"  or styling.frames=="etched" or styling.frames=="memory corridor" then "white"
					else "black"
			separator color: red
			#影子实现
			shadow color: script: if (has_shadow()) then rgba(0,0,0,255) else rgba(0,0,0,0)
			shadow displacement x: 2.5
			shadow displacement y: 2.5
			shadow blur: 1


	super type:
		left: { (if is_tll() then 0 else 1000)+ (if has_identity() then 102 else 64) }
		top: { shrink_type() + 862 + (if set.card_language != "简体中文" then 2 else 0) - (if chosen(styling.others, choice:"use phyrexian font") then shrink_type()/2 else 0)}
		width: { (if has_identity() then "280" else "310") - max(44,card_style.rarity.content_width) }
		height: { 40 - shrink_type() }
		alignment: top shrink-overflow
		z index: 2
		padding top: 2
		font:
			name: { if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0" else if set.card_language != "简体中文" then "Beleren Bold" else "华康魏碑 Std W7" }
			size: { if set.card_language != "简体中文" then 26 - shrink_type() else 32 - shrink_type() }
			color: {if styling.frames=="goldenage" or styling.frames=="neon" or styling.frames=="ninja" or styling.frames=="samurai" or styling.frames=="textless land(innistrad)" then "white" else "black"}
			separator color: red
	sub type:
		left: { (if is_tll() then 425 else 1000)+ 64 }
		top: { shrink_type() + 862 + (if set.card_language != "简体中文" then 2 else 0) - (if chosen(styling.others, choice:"use phyrexian font") then shrink_type()/2 else 0)}
		width: { card_style.sub_type.content_width + 20 }
		height: { 40 - shrink_type() }
		alignment: top shrink-overflow
		z index: 2
		padding top: 2
		font:
			name: { if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0" else if set.card_language != "简体中文" then "Beleren Bold" else "华康魏碑 Std W7" }
			size: { if set.card_language != "简体中文" then 26 - shrink_type() else 32 - shrink_type() }
			color: {if styling.frames=="goldenage" or styling.frames=="neon" or styling.frames=="ninja" or styling.frames=="samurai" or styling.frames=="textless land(innistrad)" then "white" else "black"}
			separator color: red


	type 2:
		left: {if styling.frames=="storybook adventure" then 64 else 0 }
		top: {if styling.frames=="storybook adventure" then if set.card_language != "简体中文" then 708 else 710 else 0 }
		width: {if styling.frames=="storybook adventure" then 310 else 0 }
		height: { 44 - shrink_type() }
		alignment: top shrink-overflow
		z index: 2
		padding top: 2
		font:
			name: { if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0" else if set.card_language != "简体中文" then "Beleren Bold" else "华康魏碑 Std W7" }
			size: { 26 - shrink_type() }
			color: white
			separator color: red


	rarity:
		right:
			script:
			 (if styling.frames=="dossier" then 681 
			 else if styling.frames=="storybook" or styling.frames=="storybook adventure" or styling.frames=="ravnica" then 694
			 else if styling.frames=="equinox" then 680
			 else if styling.frames=="breakingnews" then 690
			 else if styling.frames=="memory corridor" then 685
			 else 688)
			 + rarity_shift()
			 + if styling.frames=="textless land(unstable)" or styling.frames=="textless land(unfinity)" then 1000 else 0
		top: 
			script:
				if styling.frames=="equinox" then 598
				else if styling.frames=="zendikar rising expeditions" or styling.frames=="zendikar expeditions" or is_tll() then 864 
				else if chosen(styling.others, choice:"hide type and rarity") then 1200
				else if styling.frames=="textless land(theros)" or styling.frames=="textless land(All will be one)" then 894
				else if styling.frames=="dnd sourcebook" then 603
				else if styling.frames=="ravnica" or styling.frames=="storybook" or styling.frames=="storybook adventure" then 599
				else if styling.frames=="tarkir" then 595
				else if styling.frames=="tale" then 601
				else if styling.frames=="vault" then 599
				else if styling.frames=="breakingnews" then 626
				else if styling.frames=="memory corridor" then 592
				else if styling.frames=="jpshowcase" then 650
				else if styling.frames=="ghostfire" then 547
				else if styling.frames=="stellarsights" then 704
				else if styling.frames=="stellarsightsposter" then 684
				else 597
		width: 88
		height: 44
		z index: 2
		render style: image
		alignment: middle right
		include file: /magic-rarity.mse-include/rarity
		choice images:
			# Images based on the set symbol
			basic land:
				script:
					if use_main_rarity() then "/magic-mainframe-extras.mse-include/" + un_png(set.mainframe_rarity_name) + "c.png"
					else if styling.inverted_common_symbol then symbol_variation(symbol: set.symbol, variation: "invertedcommon")
					else symbol_variation(symbol: set.symbol, variation: "common")
			common:
				script:
					if use_main_rarity() then "/magic-mainframe-extras.mse-include/" + un_png(set.mainframe_rarity_name) + "c.png"
					else if styling.inverted_common_symbol then symbol_variation(symbol: set.symbol, variation: "invertedcommon")
					else symbol_variation(symbol: set.symbol, variation: "common")
			uncommon:
				script:
					if use_main_rarity() then "/magic-mainframe-extras.mse-include/" + un_png(set.mainframe_rarity_name) + "u.png"
					else symbol_variation(symbol: set.symbol, variation: "uncommon")
			rare:
				script:
					if use_main_rarity() then "/magic-mainframe-extras.mse-include/" + un_png(set.mainframe_rarity_name) + "r.png"
					else symbol_variation(symbol: set.symbol, variation: "rare")
			mythic rare:
				script:
					if use_main_rarity() then "/magic-mainframe-extras.mse-include/" + un_png(set.mainframe_rarity_name) + "m.png"
					else symbol_variation(symbol: set.symbol, variation: "mythic rare")
			special:
				script:
					if use_main_rarity() then "/magic-mainframe-extras.mse-include/" + un_png(set.mainframe_rarity_name) + "s.png"
					else symbol_variation(symbol: set.symbol, variation: "special")
			masterpiece:
				script:
					if use_main_rarity() then "/magic-mainframe-extras.mse-include/" + un_png(set.mainframe_rarity_name) + "mp.png"
					else symbol_variation(symbol: set.masterpiece_symbol, variation: "mythic rare")
	############################# Text box
	text:
		left: 
			script:
				(if styling.frames=="pipboy" then 73
				else if styling.frames=="storybook adventure" then 390
				else if styling.frames=="equinox" or styling.frames=="fang" then 65
				else if styling.frames=="phyrexian" then 63
				else if styling.frames=="memory corridor" then 54
				else 58)
				+ (if is_tll() or styling.frames=="textless land(theros)" or styling.frames=="textless land(All will be one)" or styling.frames=="magicfest" then 1000
				else 0)
		top: 
			script:
				( if styling.frames=="storybook adventure" then 654
				else if styling.frames=="zendikar rising expeditions" then 595
				else if styling.frames=="zendikar expeditions" then 625
				else if styling.frames=="breakingnews" then 680
				else if styling.frames=="memory corridor" then 644
				else if styling.frames=="jpshowcase" then 710
				else if styling.frames=="ghostfire" then 610
				else if styling.frames=="stellarsights" then 755
				else if styling.frames=="stellarsightsposter" then if set.card_language != "简体中文" then 722 else 727
				else 660 )
				+ chop_top()
		width: 
			script:
				if styling.frames=="pipboy" then 604
				else if styling.frames=="storybook adventure" then 310
				else if styling.frames=="equinox" or styling.frames=="fang" then 621
				else if styling.frames=="phyrexian" then 623
				else if styling.frames=="memory corridor" then 633
				else 636
		bottom: 
			script:
				( if styling.frames=="zendikar rising expeditions" then 856
				else if styling.frames=="zendikar expeditions" then 850
				else if styling.frames=="ninja" or styling.frames=="samurai" then 950
				else if styling.frames=="phyrexian" then 960
				else if styling.frames=="breakingnews" then 950
				else if styling.frames=="memory corridor" then 960
				else if styling.frames=="ghostfire" then 920
				else if styling.frames=="stellarsightsposter" then 965
				else 970 )
				- chop_bot()
		font:
			name: 
				script:
						 if styling.frames=="pipboy"  then if set.card_language != "简体中文" then "Neo Sans Pro"  else "华康圆体 - Kelvin"
					else if styling.frames=="dossier" then if set.card_language != "简体中文" then "Special Elite" else "DFPKaiShu-GB5"
					else if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0"
					else if set.card_language != "简体中文" then "MPlantin" else ch_font()
			italic name:
				script:
					if styling.frames=="dossier" then if set.card_language != "简体中文" then "Special Elite" else ch_flavor_font()
					else if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0"
					else if set.card_language != "简体中文" then "MPlantin-Italic" else ch_flavor_font()
			size: {if styling.font_cap != "" then to_number(styling.font_cap) else 27 }
			scale down to: 6
			color: {if styling.frames=="stellarsights" or styling.frames=="stellarsightsposter" or styling.frames=="magnified" or styling.frames=="ghostfire" or styling.frames=="jpshowcase" or styling.frames=="paranormal" or styling.frames=="bot" or styling.frames=="imaginecritters" or styling.frames=="tale" or styling.frames=="crystal" or styling.frames=="pipboy" or styling.frames=="glass" or styling.frames=="tardis" or styling.frames=="tarkir" or styling.frames=="ixalan" or styling.frames=="goldenage" or styling.frames=="neon" or styling.frames=="ninja" or styling.frames=="samurai" or styling.frames=="etched" or styling.frames=="textless land(unstable)" then "white" else "black"}
			#影子实现
			shadow color: script: if (has_shadow()) then rgba(0,0,0,255) else rgba(0,0,0,0)
			shadow displacement x: 2.5
			shadow displacement y: 2.5
			shadow blur: 1

		symbol font:
			name: { styling.text_box_mana_symbols }
			size: {if styling.font_cap != "" then to_number(styling.font_cap) else 27 }
			scale down to: 6
		alignment:
			script:
				if (styling.center_text == "short text only" and
				   not contains(match:"\n", card.rule_text) and
				   card.flavor_text == "<i-flavor></i-flavor>" and
				   card_style.text.content_lines <= 2) or
				   styling.center_text == "always"
				then "middle center"
				else "middle left"
				+ if styling.justify_text == "yes" then " justify-all" else if styling.justify_text == "force justify" then " force justify-all" else ""
		z index: 4
		padding left: {if (styling.frames=="dossier" and set.card_language == "简体中文") then 10 else if styling.frames=="phyrexian" then 14 else 6}
		padding right:  {4 + chop_right()}
		line height hard: {if styling.frames=="dossier" then 1.3 else 1.1 }
		line height line: {if styling.frames=="dossier" then 2 else (if chinese_new_font() then 1.6 else 1.5) }
		line height soft: {if styling.frames=="dossier" then 1.1 else (if chinese_new_font() then 1.0 else 0.9) }
		line height hard max: 1.2
		line height line max: { if chinese_new_font() then 1.7 else 1.6 }

	text 2:
		left: {if styling.frames=="storybook adventure" then 58 else 0}
		top: { if styling.frames=="storybook adventure" then 765 + extra_chop_top() else 0 }
		width: { if styling.frames=="storybook adventure" then 314 else 0 }
		bottom: { 960-extra_chop_bot() }
		font:
			name: {if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0" else  if set.card_language != "简体中文" then "MPlantin" else ch_font() }
			italic name: { if chosen(styling.others, choice:"use phyrexian font") then "Phi_horizontal_gbrsh_3.0" else if set.card_language != "简体中文" then "MPlantin-Italic" else ch_flavor_font() }
			size: {if styling.font_cap_extra != "" then to_number(styling.font_cap_extra) else 26 }
			scale down to: 6
			color: black
		symbol font:
			name: { styling.text_box_mana_symbols }
			size: {if styling.font_cap_extra != "" then to_number(styling.font_cap_extra)-2 else 26 }
		alignment:
			script:
				if (styling.center_text == "short text only" and
				   not contains(match:"\n", card.rule_text) and
				   card.flavor_text == "<i-flavor></i-flavor>" and
				   card_style.text.content_lines <= 2) or
				   styling.center_text == "always"
				then "middle center"
				else "middle left"
				+ if styling.justify_text == "yes" then " justify-all" else if styling.justify_text == "force justify" then " force justify-all" else ""
		z index: 4
		padding left:   6
		padding right:  {4 + extra_chop_right()}
		line height hard: 1.1
		line height line: { if chinese_new_font() then 1.6 else 1.5 }
		line height soft: { if chinese_new_font() then 1.0 else 0.9 }
		line height hard max: 1.2
		line height line max: { if chinese_new_font() then 1.7 else 1.6 }

	watermark:
		left: 
			script:
				if styling.frames=="textless land(All will be one)" then 36
				else if is_tll() then 317
				else if styling.frames=="textless land(theros)" or styling.frames=="magicfest" then 1000
				else 50
		top:
			script:
				(if styling.frames=="textless land(All will be one)" then 888
				else if styling.frames=="zendikar rising expeditions" then 605
				else if styling.frames=="zendikar expeditions" then 630
				else if is_tll() then 825
				else if styling.frames=="breakingnews" then 692
				else if styling.frames=="jpshowcase" then 726
				else if styling.frames=="ghostfire" then 626
				else if styling.frames=="stellarsights" then 765
				else if styling.frames=="stellarsightsposter" then 732
				else 676)
				 - (if styling.frames=="textless land(zendikar)" or styling.frames=="textless land(innistrad)" then 0
				 else 8)
		width: {if styling.frames=="textless land(All will be one)" then 75 else if is_tll() then 118 else 650}
		height: 
			script:
				if styling.frames=="textless land(All will be one)" then 75
				else if styling.frames=="zendikar rising expeditions" then 245
				else if styling.frames=="zendikar expeditions" then 220
				else if is_tll() then 118
				else if styling.frames=="breakingnews" then 263
				else if styling.frames=="jpshowcase" then 229
				else if styling.frames=="stellarsights" then 212
				else if styling.frames=="stellarsightsposter" then 245
				else 278
		z index: 2
		render style: image
		popup style: in place
		alignment: middle center
		include file: /magic-watermarks.mse-include/watermarks
	############################# PT

	#祝愿
	power:
		z index: 5
		left:	{if styling.frames=="invocation" then 646.5 else 1000}
		top:	{if styling.frames=="invocation" then 861 else 2000}
		width:	{if styling.frames=="invocation" then 46.5 else 0}
		height:	{if styling.frames=="invocation" then 70 else 0}
		alignment: center middle shrink-overflow
		font:
			name: Beleren Bold
			size: 32
			color: black
	toughness:
		z index: 5
		left:	{if styling.frames=="invocation" then 646.5 else 1000}
		top:	{if styling.frames=="invocation" then 911 else 2000}
		width:	{if styling.frames=="invocation" then 46.5 else 0}
		height:	{if styling.frames=="invocation" then 70 else 0}
		alignment: center middle shrink-overflow
		font:
			name: Beleren Bold
			size: 32
			color: black

	pt:
		z index: 5
		left:
			script:
				if styling.frames=="dossier" then 580
				else if styling.frames=="sketch" then 588
				else if styling.frames=="tale" then 590
				else if styling.frames=="storybook" or styling.frames=="storybook adventure" then 589
				else if styling.frames=="tardis" then 584
				else if styling.frames=="invocation" then 1000
				else if styling.frames=="ixalan" then 585
				else if styling.frames=="artdeco" or styling.frames=="ravnica" then 588.5
				else if styling.frames=="goldenage" then 582
				else if styling.frames=="breakingnews" then 587
				else if styling.frames=="memory corridor" then 593
				else if styling.frames=="bot" then 590
				else if styling.frames=="paranormal" then 585 
				else 586
		top:
			script:
				if (styling.frames=="pipboy") then 938
				else if styling.frames=="dossier" then 933
				else if styling.frames=="sketch" then 937
				else if styling.frames=="tardis" or styling.frames=="ninja" or styling.frames=="equinox" then 934
				else if styling.frames=="invocation" then 2000
				else if styling.frames=="artdeco" then 932
				else if styling.frames=="goldenage" then 935
				else if styling.frames=="samurai" then 940
				else if styling.frames=="lcilegend" then 937
				else if styling.frames=="breakingnews" then 934
				else if styling.frames=="memory corridor" then 932
				else if styling.frames=="bot" then 931
				else if styling.frames=="jpshowcase" then 938
				else if styling.frames=="ghostfire" then 921
				else 936
		width: 120
		height:	56
		alignment: center middle shrink-overflow
		angle: {if styling.frames=="dossier" then 2 else 0}
		font:
			name:
				script:
					if styling.frames=="pipboy" then "OCR A Std"
					else if chosen(styling.others, choice:"use phyrexian font") then "GeishaHolidayW00-Regular"
					else if styling.frames=="memory corridor" then "DINNextW10-Medium"
					else "Beleren Bold"
			size:
				script:
					(if styling.frames=="pipboy" then 29.5
					else if styling.frames=="ravnica" or styling.frames=="dossier" then 30
					else if styling.frames=="phyrexian" then 31
					else 32)
					- (if styling.shrink_power_text != "" then to_number(styling.shrink_power_text) else 0)

			color: {if styling.frames=="stellarsights" or styling.frames=="ghostfire" or styling.frames=="jpshowcase" or styling.frames=="paranormal" or styling.frames=="bot" or styling.frames=="imaginecritters" or styling.frames=="crystal" or styling.frames=="pipboy" or styling.frames=="glass" or styling.frames=="tardis" or styling.frames=="ring" or styling.frames=="ixalan" or styling.frames=="artdeco" or styling.frames=="goldenage" or styling.frames=="neon" or styling.frames=="ninja" or styling.frames=="samurai" or styling.frames=="etched" or styling.frames=="memory corridor" then "white" else "black"}
			separator color: red
	############################# Card sorting / numbering
	set code:
		left: 48.5
		top: 998
		width: 80
		height: 20
		z index: 1
		alignment: middle left
		font:
			name: Magic Gotham Medium
			size: {13-shrink_setcode()}
			color: white

	language code:
		left: 106
		top: 998
		width: 10
		height: 20
		z index: 1
		alignment: middle left
		font:
			name: Magic Gotham Medium
			size: {13-shrink_setcode()}
			color: white

	############################# Copyright stuff
	illustrator:
		left: { 166 }
		top: 997
		width: 400
		height: 20
		z index: 5
		font:
			name: Beleren Small Caps Bold
			size: 14
			color: white
	copyright:
		right: 699
		top: { if ((card.pt != "" or is_ub() or chosen(styling.others, choice:"second copyright"))) then 998 else 981 }
		width: 252
		height: 20
		z index: 5
		alignment: middle right shrink-overflow
		visible: {not set.automatic_copyright}
		font:
			name: mplantin
			size: 13
			color: white
############################################################## Extra card fields
extra card field:
	type: text
	name: dot
	script: if styling.is_foil then "★" else "•"
	save value: false
	editable: false
	show statistics: false
extra card field:
	type: text
	name: card code
	save value: false
	editable: false
	script: rarity_code()
extra card field:
	type: text
	name: card number
	save value: false
	script:
		if set.automatic_card_numbers and not styling.remove_from_autocount then
			forward_editor(prefix: card_number_m15(), field: card.card_code_text) 
		else
			forward_editor(prefix: "", field: card.custom_card_number)

extra card field:
	type: choice
	name: artist arrow
	editable: false
	save value: false
	choice: white
extra card field:
	type: choice
	name: pt box
	script: card.card_color
	editable: false
	save value: false
extra card field:
	type: multiple choice
	name: stamp
	empty choice: colorless
	choice: white
	choice: blue
	choice: black
	choice: red
	choice:
		name: green
		line below: true
	choice: artifact
	choice: land
	choice: multicolor
	choice:
		name: hybrid
		line below: true
	choice:
		name: horizontal
		type: radio
	choice:
		name: vertical
		type: radio
	choice:
		name: radial
		type: radio
	choice:
		name: diagonal
		type: radio
	choice:
		name: overlay
		type: radio
	choice:
		name: reversed
	script: card_color_filter(value)
	default: card_color(casting_cost: card.casting_cost, rules_text: card.rule_text, type: card.super_type, watermark: card.watermark, card_name: card.name)
extra card field:
	type: text
	name: auto copyright
	script: set.copyright
	save value: false
	editable: false
	show statistics: false
extra card field:
	type: choice
	name: flavor bar
	choice: bar
	editable: false
	save value: false
	show statistics: false
extra card field:
	type: choice
	name: vehicle overlay
	choice: overlay
	editable: false
	save value: false
	show statistics: false

extra card field:
	type: choice
	name: land mask
	choice: stamp
	save value: false
	editable: false
extra card field:
	type: choice
	name: stampback
	choice: stamp
	save value: false
	editable: false
extra card field:
	type: choice
	name: crown
	script: card.card_color
	editable: false
extra card field:
	type: choice
	name: vehicle overlay
	choice: overlay
	editable: false
	save value: false
	show statistics: false

extra card field:
	type: choice
	name: ravnica twins
	script: card.card_color
	editable: false



extra card field:
	type: choice
	name: level 2 overlay
	script: card.card_color
	choice: mask
	editable: false
	show statistics: false
extra card field:
	type: choice
	name: level 3 overlay
	script: card.card_color
	choice: mask
	editable: false
	show statistics: false
extra card field:
	type: choice
	name: level 4 overlay
	script: card.card_color
	choice: mask
	editable: false
	show statistics: false

extra card field:
	type: choice
	name: sourcebook color back
	script: card.card_color
	editable: false
	save value: false
extra card field:
	type: choice
	name: sourcebook fix
	choice: overlay
	editable: false
	save value: false
	show statistics: false
extra card field:
	type: text
	name: copyright2
	save value: true
	editable: true
	show statistics: false
extra card field:
	type: text
	name: card extra text
	save value: true
	editable: true
	show statistics: false
extra card field:
	type: choice
	name: serialized
	choice: bar
	editable: false
	save value: false
	show statistics: false
extra card field:
	type: text
	name: serialized number 1
	editable: true
	show statistics: false
	save value: true

extra card field:
	type: choice
	name: foil layer
	choice: bar
	editable: false
	save value: false
	show statistics: false

extra card style:
	dot:
		left: {48.5 + card_style.set_code.content_width}
		right: {card_style.language_code.left}
		top: 998
		#width: 10
		height: 20
		z index: 1
		alignment: middle center
		font:
			name: Magic Gotham Medium
			size: {13-shrink_setcode()}
			color: white

	card code:
		left: 48.5
		top: 979
		width: 20
		height: 20
		z index: 5
		font:
			name: Magic Gotham Medium
			size: 13
			color: white

	card number:
		left: 69
		top: 979
		width: 72.5
		height: 20
		z index: 5
		font:
			name: Magic Gotham Medium
			size: 13
			color: white
	card extra text:
		left: 141.5
		top: 979
		width: 185
		height: 20
		z index: 5
		font:
			name: Magic Gotham Medium
			size: 13
			color: white
	artist arrow:
		left: { 143 }
		top: 1002
		width: {24*0.9}
		height: {15*0.9}
		z index: 1
		render style: image
		image: artist_arrow.png
		
	pt box:
		left:	{if styling.frames=="dossier" then 573.8806 else if styling.frames=="invocation" then 646.5 else if styling.frames=="tarkir" then 578.5 else if styling.frames=="mystical archive" then 566.5 else if styling.frames=="ravnica" then 576.5 else 0}
		top:	{if styling.frames=="dossier" then 920.8955 else if styling.frames=="invocation" then 861 else if styling.frames=="tarkir" then 925 else if styling.frames=="mystical archive" then 923 else if styling.frames=="ravnica" then 927.5 else 0}
		width:	{if styling.frames=="dossier" then 140 else if styling.frames=="invocation" then 46.5 else if styling.frames=="tarkir" then 137 else if styling.frames=="mystical archive" then 158.5 else if styling.frames=="ravnica" then 143.5 else 750}
		height:	{if styling.frames=="dossier" then 72.7612 else if styling.frames=="invocation" then 132 else if styling.frames=="tarkir" then 75 else if styling.frames=="mystical archive" then 79.5 else if styling.frames=="ravnica" then 72.5 else 1050}
		z index: 4
		visible: { card.pt != "" }
		render style: image
		image: { pt_box_chose() }
	stamp:
		left:	{stamp_img_left()}
		top:	{stamp_img_top()}
		width:	{stamp_img_width()}
		height:	{stamp_img_height()}
		z index: 4
		visible: 
			script:
				is_rare() and styling.use_holofoil_stamps and 
				(styling.frames!="phyrexian"
				and styling.frames!="sketch"
				and styling.frames!="equinox"
				and styling.frames!="crystal" 
				and styling.frames!="fang"
				and styling.frames!="tale"
				and styling.frames!="textless land(unstable)"
				and styling.frames!="textless land(unfinity)"
				and styling.frames!="dnd sourcebook"
				and styling.frames!="bot")
		render style: image
		image: { stamp_img_chose() }

	crown:
		left: 0
		top: 0
		width:	750
		height:	1050
		render style: image
		image:{ crown_img_chose() }
		z index: 1
		visible: { is_legend() and (styling.frames=="sketch" or styling.frames=="paranormal" or styling.frames=="lcilegend" or styling.frames=="breakingnews" or styling.frames=="vault" or styling.frames=="scroll" or styling.frames=="dossier" or styling.frames=="crystal" or styling.frames=="pipboy" or styling.frames=="storybook" or styling.frames=="storybook adventure" or styling.frames=="glass" or styling.frames=="tardis" or styling.frames=="ring" or styling.frames=="tarkir" or styling.frames=="ixalan" or styling.frames=="phyrexian" or styling.frames=="mystical archive" or styling.frames=="ravnica" or styling.frames=="fang" or styling.frames=="artdeco" or styling.frames=="neon" or styling.frames=="ninja" or styling.frames=="samurai" or styling.frames=="etched" or styling.frames=="magicfest" )}

	###卷轴合并在这
	ravnica twins:
		left: 0
		top: 0
		width:	750
		height:	1050
		render style: image
		image:{ if styling.frames=="scroll" and contains(match:"multicolor,", card.card_color) then "scroll/multicolor-bar.png" else if styling.frames=="mystical archive" then archive_twins_background() else if styling.frames=="ravnica" then ravnica_twins_background() else ""}
		z index: 1
		visible: {styling.frames=="scroll" or styling.frames=="ravnica" or styling.frames=="mystical archive"}
	
	level 2 overlay:
		left: 58
		top: { if is_d20() then top_of_para(rolls_start(card.text)) else 0}
		height: { if is_d20() then height_of_para(rolls_start(card.text)) else 0}
		width: 630
		z index: 3
		render style: image
		image: {overlay1()}
		visible: {(is_d20() and number_of_rolls(card.text) > 0)}
	level 3 overlay:
		left: 58
		top: { if is_d20() then top_of_para(rolls_start(card.text)+2) else 0}
		height: { if is_d20() then height_of_para(rolls_start(card.text)+2) else 0}
		width: 630
		z index: 3
		render style: image
		image: {overlay2()}
		visible: {(is_d20() and number_of_rolls(card.text)-no_roll(card.text) > 2)}
	level 4 overlay:
		left: 58
		top: { if is_d20() then top_of_para(rolls_start(card.text)+4) else 0}
		height: { if is_d20() then height_of_para(rolls_start(card.text)+4) else 0}
		width: 630
		z index: 3
		render style: image
		image: {overlay3()}
		visible: {(is_d20() and number_of_rolls(card.text)-no_roll(card.text) > 4) }

	stampback:
		left: 332.5
		top: 954
		width: 84
		height: 20
		z index: 2
		visible: { is_rare() and styling.use_holofoil_stamps and (styling.frames=="zendikar rising expeditions" or styling.frames=="zendikar expeditions") }
		render style: image
		image: expedition/stamp_back.png

	auto copyright:
		right: 699
		top: { ( if ((card.pt != "" or is_ub() or chosen(styling.others, choice:"second copyright"))) then 998 else 981 ) + (if styling.frames=="etched" then 2 else 0) }
		width: 252
		height: 20
		z index: 5
		alignment: middle right shrink-overflow
		visible: {set.automatic_copyright}
		font:
			name: mplantin
			size: 13
			color: white

	copyright2:
		right: 699
		top: { (if is_ub() or chosen(styling.others, choice:"second copyright") then 981 else 1111) + (if styling.frames=="etched" then 2 else 0)}
		width: 252
		height: 20
		z index: 5
		alignment: 
			script:
				if card.pt != "" then "middle left shrink-overflow"
				else "middle right shrink-overflow"
		visible: {is_ub() or chosen(styling.others, choice:"second copyright")}
		font:
			name: mplantin
			size: {13 - (if styling.shrink_ubcopyright_text != "" then to_number(styling.shrink_ubcopyright_text) else 0)}
			color: white

	flavor bar:
		left: 0
		top: { if styling.frames=="dossier" then bar_equation()-4 else bar_equation() -4 }
		width: 750
		height: 7
		z index: 4
		render style: image
		image: bar.png
		visible: { card.rule_text != "" and remove_tags(card.flavor_text) != "" and set.use_flavor_bar }
	land mask:
		left: 0
		top: 0
		width:	750
		height:	1050
		z index: 1
		visible: { styling.frames=="zendikar expeditions" and chosen(choice: "land", card.card_color) }
		render style: image
		image: expedition/exp/lmask.png
	vehicle overlay:
		left: 0
		top: 0
		width:	750
		height:	1050
		render style: image
		image: {"phyrexian/voverlay.png"}
		mask: {"phyrexian/voverlay_mask.png"}
		z index: 1
		visible: {styling.frames=="phyrexian" and is_vehicle()}
		
	sourcebook color back:
		left: {if styling.frames=="ixalan" then 0 else 30}
		top: {if styling.frames=="ixalan" then 0 else 116}
		width: {if styling.frames=="ixalan" then 750 else 690}
		height:	{if styling.frames=="ixalan" then 1050 else 475}
		z index: -3
		render style: image
		image: {if styling.frames=="ixalan" then "ixalan/coinCover.png" else color_back_background()}
		visible: {styling.frames=="ixalan" or styling.frames=="dnd sourcebook" and not chosen(styling.others, choice:"original background" )}

	##辐射合并在里面
	sourcebook fix:
		left: 0
		top: 0
		width:	750
		height:	1050
		z index: 6
		render style: image
		image: {if styling.frames=="scroll" then "scroll/framefix.png" else if styling.frames=="pipboy" then if chosen(styling.others, choice:"use alias") then "pipboy/aliasstats.png" else "pipboy/stats.png" else if hover_art_fix_bot()!=0 then "" else "sourcebook/framefix.png"}
		visible: {styling.frames=="scroll" or styling.frames=="pipboy" or styling.frames=="dnd sourcebook"}
	
	serialized:
		left:	{serialized_img_left()}
		top:	{serialized_img_top()}
		width:	178
		height:	55
		z index: 5
		visible: { is_serialized() }
		render style: image
		image: { "Serialized.png" }

	serialized number 1:
		left: {if is_serialized() then (serialized_img_left()+5) else 0 }
		top: {if is_serialized() then (serialized_img_top()+5) else 0 }
		width: {if is_serialized() then (178-10) else 0 }
		height: {if is_serialized() then (55-10) else 0 }
		z index: 6
		alignment: middle center
		font:
			name: {"Magic Gotham Medium"}
			size: {23}
			color: white
			weight: {"bold"}
		visible: {is_serialized()}

	foil layer:
		left: 0
		top : 0
		width: 750
		height: 1050
		z index: 9
		render style: image
		image: {if styling.overlay == "" then nil else styling.overlay + "/overlay.png"}
